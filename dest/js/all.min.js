"use strict";angular.module("gbcui_shopApp.resource",["gbcui_shopApp.resource.services"]),angular.module("gbcui_shopApp.resource.services",["ngResource","LocalStorageModule"]),angular.module("gbcui_shopApp.resource.services").constant("SERVER_URL","http://gbcui.com").constant("PRODUCT_SERVER_URL","http://gbcui.com/mobile-token/api/product.").constant("ORDER_SERVER_URL","http://gbcui.com/mobile-token/api/order.").constant("ACCOUNT_SERVER_URL","http://gbcui.com/mobile-token/api/account.").constant("COMMON_SERVER_URL","http://gbcui.com/mobile-token/api/common.").constant("CONTENT_SERVER_URL","http://gbcui.com/mobile-token/api/content.").constant("HUMANRES_SERVER_URL","http://gbcui.com/mobile-token/api/humanres.").constant("MARKET_SERVER_URL","http://gbcui.com/mobile-token/api/market.").constant("PARTY_SERVER_URL","http://gbcui.com/mobile-token/api/party.").constant("AUTH_SERVER_URL","http://gbcui.com/mobile-token/auth").constant("OAUTH_BASE_URL","http://gbcui.com/mobile-token/api").constant("OAUTH_SERVER_URL","http://gbcui.com/mobile-token/api").constant("AUTH_EVENTS",{unauthorized:"auth-not-authorized",forbidden:"page-is-forbidden",pageNotFound:"page-not-find"}).constant("USER_ROLES",{loginUser:"user_role",anonymousUser:"anonymous_role"}).factory("authHttpInterceptor",["localStorageService","$rootScope","AUTH_EVENTS","$q",function(e,t,o,s){return{request:function(t){if(t.skipAuthorization)return t;if(t.urlParam){if(t.params=t.params||{},t.params[t.urlParam])return t}else if(t.headers=t.headers||{},t.headers["X-Auth-Token"])return t;return e.get("appToken")&&(t.headers["X-Auth-Token"]=e.get("appToken")),t},response:function(e){return e||s.when(e)},responseError:function(e){return t.$broadcast({401:o.unauthorized,403:o.forbidden,404:o.pageNotFound}[e.status],e),s.reject(e)}}}]).config(["$httpProvider",function(e){e.interceptors.push("authHttpInterceptor")}]).factory("ProductSearch",["$resource","PRODUCT_SERVER_URL",function(e,t){return e(t+"productSearch",{},{query:{method:"POST",skipAuthorization:!0,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},transformRequest:transformRequest}})}]).factory("ProductSummary",["$resource","PRODUCT_SERVER_URL",function(e,t){return e(t+"productSummary",{},{get:{method:"POST",skipAuthorization:!0,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},transformRequest:transformRequest}})}]).factory("ProductContent",["$resource","PRODUCT_SERVER_URL",function(e,t){return e(t+"productContent",{},{get:{method:"POST",skipAuthorization:!0,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},transformRequest:transformRequest}})}]).factory("ProductReview",["$resource","PRODUCT_SERVER_URL",function(e,t){return e(t+"productReview",{},{get:{method:"POST",skipAuthorization:!0,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},transformRequest:transformRequest}})}]).factory("ProductBase",["$resource","PRODUCT_SERVER_URL",function(e,t){return e(t+"productSummary",{},{get:{method:"POST",skipAuthorization:!0,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},transformRequest:transformRequest}})}]).factory("ProductCategoryList",["$resource","PRODUCT_SERVER_URL",function(e,t){return e(t+"productCategoryList",{},{get:{method:"POST",skipAuthorization:!0,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},transformRequest:transformRequest}})}]).factory("ProductCategory",["$resource","PRODUCT_SERVER_URL",function(e,t){return e(t+"productCategory",{},{get:{method:"POST",skipAuthorization:!0,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},transformRequest:transformRequest}})}]).factory("ProductCategoryByCatalogAndType",["$resource","PRODUCT_SERVER_URL",function(e,t){return e(t+"productCategoryByCatalogAndType",{},{get:{method:"POST",skipAuthorization:!0,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},transformRequest:transformRequest}})}]).factory("ProductCategoryByParentId",["$resource","PRODUCT_SERVER_URL",function(e,t){return e(t+"productCategoryByParentId",{},{get:{method:"POST",skipAuthorization:!0,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},transformRequest:transformRequest}})}]).factory("CategoryProducts",["$resource","PRODUCT_SERVER_URL",function(e,t){return e(t+"categoryProducts",{},{get:{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},transformRequest:transformRequest}})}]).factory("VariantProductQuery",["$resource","PRODUCT_SERVER_URL",function(e,t){return e(t+"variantProductQuery",{},{get:{method:"POST",skipAuthorization:!0,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},transformRequest:transformRequest}})}]).factory("ConfigProductConfig",["$resource","PRODUCT_SERVER_URL",function(e,t){return e(t+"configProductConfig",{},{get:{method:"POST",skipAuthorization:!0,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},transformRequest:transformRequest}})}]).factory("GetAssociatedProducts",["$resource","PRODUCT_SERVER_URL",function(e,t){return e(t+"getAssociatedProducts",{},{get:{method:"POST",skipAuthorization:!0,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},transformRequest:transformRequest}})}]).factory("UserLogin",["$resource","AUTH_SERVER_URL",function(e,t){return e(t,{},{get:{skipAuthorization:!0,method:"POST"}})}]).factory("GetAssociatedStateList",["$resource","COMMON_SERVER_URL",function(e,t){return e(t+"getAssociatedStateList",{},{get:{method:"POST",skipAuthorization:!0,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},transformRequest:transformRequest}})}]).factory("GetStorePaymentOptions",["$resource","COMMON_SERVER_URL",function(e,t){return e(t+"getStorePaymentOptions",{},{get:{method:"POST",skipAuthorization:!0,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},transformRequest:transformRequest}})}]).factory("PersonBaseQuery",["$resource","PARTY_SERVER_URL",function(e,t){return e(t+"personBaseQuery",{},{get:{method:"POST"}})}]).factory("PersonScoreQuery",["$resource","PARTY_SERVER_URL",function(e,t){return e(t+"personScoreQuery",{},{get:{method:"POST"}})}]).factory("PersonAddressQuery",["$resource","PARTY_SERVER_URL",function(e,t){return e(t+"personAddressQuery",{},{get:{method:"POST"}})}]).factory("PersonAddressDetail",["$resource","PARTY_SERVER_URL",function(e,t){return e(t+"personAddressDetail",{},{get:{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},transformRequest:transformRequest}})}]).factory("PersonAddressUpdate",["$resource","PARTY_SERVER_URL",function(e,t){return e(t+"personAddressUpdate",{},{update:{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},transformRequest:transformRequest}})}]).factory("PersonAddressAdd",["$resource","PARTY_SERVER_URL",function(e,t){return e(t+"personAddressAdd",{},{save:{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},transformRequest:transformRequest}})}]).factory("PersonAddressDel",["$resource","PARTY_SERVER_URL",function(e,t){return e(t+"personAddressDel",{},{get:{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},transformRequest:transformRequest}})}]).factory("PersonBaseSave",["$resource","PARTY_SERVER_URL",function(e,t){return e(t+"personBaseSave",{},{save:{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},transformRequest:transformRequest}})}]).factory("PersonContentUpload",["$resource","PARTY_SERVER_URL",function(e,t){return e(t+"personContentUpload",{},{upload:{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},transformRequest:transformRequest}})}]).factory("PersonContent",["$resource","PARTY_SERVER_URL",function(e,t){return e(t+"personContent",{},{get:{method:"POST"}})}]).factory("PersonProfileDefault",["$resource","PARTY_SERVER_URL",function(e,t){return e(t+"personProfileDefault",{},{get:{method:"POST"}})}]).factory("SetDefaultPersonProfile",["$resource","PARTY_SERVER_URL",function(e,t){return e(t+"setPartyProfileDefaults",{},{set:{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},transformRequest:transformRequest}})}]).factory("PersonAddressDefault",["$resource","PARTY_SERVER_URL",function(e,t){return e(t+"personAddressDefault",{},{get:{method:"POST"}})}]).factory("PersonRegister",["$resource","PARTY_SERVER_URL",function(e,t){return e(t+"personRegister",{},{get:{method:"POST",skipAuthorization:!0,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},transformRequest:transformRequest}})}]).factory("AddItemToShoppingCart",["$resource","ORDER_SERVER_URL",function(e,t){return e(t+"addItemToShoppingCart",{},{get:{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},transformRequest:transformRequest}})}]).factory("GetShoppingCart",["$resource","ORDER_SERVER_URL",function(e,t){return e(t+"getShoppingCart",{},{get:{method:"POST"}})}]).factory("GetShoppingCartCount",["$resource","ORDER_SERVER_URL",function(e,t){return e(t+"getShoppingCartCount",{},{get:{method:"POST"}})}]).factory("ModifyCart",["$resource","ORDER_SERVER_URL",function(e,t){return e(t+"modifyCart",{},{get:{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},transformRequest:transformRequest}})}]).factory("GetCartShipments",["$resource","ORDER_SERVER_URL",function(e,t){return e(t+"getCartShipments",{},{get:{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},transformRequest:transformRequest}})}]).factory("OrderCheckout",["$resource","ORDER_SERVER_URL",function(e,t){return e(t+"checkout",{},{get:{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},transformRequest:transformRequest}})}]).factory("GetOrderHistory",["$resource","ORDER_SERVER_URL",function(e,t){return e(t+"getOrderHistory",{},{get:{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},transformRequest:transformRequest}})}]).factory("NewTimesData",["$resource",function(e,t){return e(t+"fitbit/new/timerange/:id/:activity/:startDate/:startTime/:endTime",{id:"@id",activity:"@activity",startDate:"@startDate",startTime:"@startTime",endTime:"@endTime"})}]).factory("goPage",["$state",function(e){return e.go({url:"@url"},{params:"@params"},{reload:"@reload"})}]);var param=function(e){var t,o,s,a,i,r,n,c="";for(t in e)if(o=e[t],o instanceof Array)for(n=0;n<o.length;++n)i=o[n],s=t+"["+n+"]",r={},r[s]=i,c+=param(r)+"&";else if(o instanceof Object)for(a in o)i=o[a],s=t+"["+a+"]",r={},r[s]=i,c+=param(r)+"&";else void 0!==o&&null!==o&&(c+=encodeURIComponent(t)+"="+encodeURIComponent(o)+"&");return c.length?c.substr(0,c.length-1):c},transformRequest=[function(e){return angular.isObject(e)&&"[object File]"!==String(e)?param(e):e}];angular.module("underscore",[]).factory("_",function(){return window._}),angular.module("gbcui_shopApp",["ionic","ngCordova","gbcui_shopApp.resource","yabiz_shopApp.views","gbcui_shopApp.common.controllers","gbcui_shopApp.common","gbcui_shopApp.account","gbcui_shopApp.auth","gbcui_shopApp.checkout","gbcui_shopApp.content","gbcui_shopApp.feed","gbcui_shopApp.sort","gbcui_shopApp.filters","gbcui_shopApp.getting-started","gbcui_shopApp.liked","gbcui_shopApp.search","gbcui_shopApp.shopping-cart","gbcui_shopApp.walkthrough","underscore","angularMoment","ngMap","ngRangeSlider","ngMessages"]).run(["$ionicPlatform","amMoment","$rootScope",function(e,t,o){o.previousView=[],o.$on("$stateChangeSuccess",function(e,t,s,a,i){var r=_.last(o.previousView);r&&r.fromState===t.name?o.previousView.pop():o.previousView.push({fromState:a.name,fromParams:i})}),e.ready(function(){console.log("$ionicPlatform.ready"),window.cordova&&window.cordova.plugins.Keyboard&&(cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!0),cordova.plugins.Keyboard.disableScroll(!0)),window.StatusBar&&StatusBar.styleDefault(),t.changeLocale("en-gb")})}]).config(["$ionicConfigProvider",function(e){e.tabs.position("bottom"),e.views.swipeBackEnabled(!1),e.form.checkbox("circle"),ionic.Platform.isWebView()||(console.log("jsScrolling"),e.scrolling.jsScrolling(!1))}]).config(["$stateProvider","$urlRouterProvider","USER_ROLES",function(e,t,o){e.state("intro",{url:"/intro",abstract:!0,templateUrl:"views/common/intro.html"}).state("intro.walkthrough-welcome",{url:"/walkthrough-welcome",views:{"intro-view@intro":{templateUrl:"views/walkthrough/welcome.html"}}}).state("intro.walkthrough-learn",{url:"/walkthrough-learn",views:{"intro-view@intro":{templateUrl:"views/walkthrough/learn.html",controller:"GettingStartedCtrl"}}}).state("intro.auth-login",{url:"/auth-login",views:{"intro-view@intro":{templateUrl:"views/auth/login.html",controller:"LoginCtrl"}}}).state("intro.auth-signup",{url:"/auth-signup",views:{"intro-view@intro":{templateUrl:"views/auth/signup.html",controller:"SignupCtrl"}}}).state("intro.auth-forgot-password",{url:"/forgot-password",views:{"intro-view@intro":{templateUrl:"views/auth/forgot-password.html",controller:"ForgotPasswordCtrl"}}}).state("main",{url:"/main",abstract:!0,templateUrl:"views/common/main.html"}).state("main.app",{url:"/app",abstract:!0,views:{"main-view@main":{templateUrl:"views/common/app.html",controller:"AppCtrl"}}}).state("main.app.filters",{url:"/filters",views:{"main-view@main":{templateUrl:"views/filters/filters.html",controller:"FiltersCtrl"}}}).state("main.app.feed",{url:"/feed",views:{"app-feed@main.app":{templateUrl:"views/feed/feed.html",controller:"FeedCtrl"}}}).state("main.app.feed.fashion",{url:"/fashion",views:{"category-feed@main.app.feed":{templateUrl:"views/feed/fashion.html",controller:"FashionCtrl"}},resolve:{products:["FashionService",function(e){return e.getProducts()}]}}).state("main.app.feed.fashion.content",{url:"/content/:productId",views:{"main-view@main":{templateUrl:"views/content/fashion.html",controller:"FashionContentCtrl"}},resolve:{product:["FashionService","$stateParams",function(e,t){return e.getProduct(t.productId)}]}}).state("main.app.feed.food",{url:"/food",views:{"category-feed@main.app.feed":{templateUrl:"views/feed/food.html",controller:"FoodCtrl"}},resolve:{products:["FoodService",function(e){var t=e.getProducts();return console.log("products===",t),t}]}}).state("main.app.feed.food.content",{url:"/content/:productId",views:{"main-view@main":{templateUrl:"views/content/food.html",controller:"FoodContentCtrl"}},resolve:{product:["FoodService","$stateParams",function(e,t){return e.getProduct(t.productId)}]}}).state("main.app.feed.travel",{url:"/travel",views:{"category-feed@main.app.feed":{templateUrl:"views/feed/travel.html",controller:"TravelCtrl"}},resolve:{products:["TravelService",function(e){var t=e.getProducts();return console.log("products===",t),t}]}}).state("main.app.feed.travel.content",{url:"/content/:productId",views:{"main-view@main":{templateUrl:"views/content/travel.html",controller:"TravelContentCtrl"}},resolve:{product:["TravelService","$stateParams",function(e,t){return e.getProduct(t.productId)}]}}).state("main.app.feed.deals",{url:"/deals",views:{"category-feed@main.app.feed":{templateUrl:"views/feed/deals.html",controller:"DealsCtrl"}},resolve:{products:["DealsService",function(e){return e.getProducts()}]}}).state("main.app.feed.deals.content",{url:"/content/:productId",views:{"main-view@main":{templateUrl:"views/content/deals.html",controller:"DealsContentCtrl"}},resolve:{product:["DealsService","$stateParams",function(e,t){return e.getProduct(t.productId)}]}}).state("main.app.feed.real-state",{url:"/real-state",views:{"category-feed@main.app.feed":{templateUrl:"views/feed/real-state.html",controller:"RealStateCtrl"}},resolve:{products:["RealStateService",function(e){return console.log("resolving real state"),e.getProducts()}]}}).state("main.app.feed.real-state.content",{url:"/content/:productId",views:{"main-view@main":{templateUrl:"views/content/real-state.html",controller:"RealStateContentCtrl"}},resolve:{product:["RealStateService","$stateParams",function(e,t){return e.getProduct(t.productId)}]}}).state("main.app.search",{url:"/search",views:{"app-search@main.app":{templateUrl:"views/search/search.html",controller:"SearchCtrl"}},resolve:{results:["FoodService",function(e){return e.getProducts()}]}}).state("main.app.fashionSearch",{url:"/fashionSearch",views:{"app-fashion-search@main.app":{templateUrl:"views/search/fashion_search.html",controller:"FashionSearchCtrl"}},resolve:{results:["FashionService",function(e){return e.getProducts()}]}}).state("main.app.liked",{url:"/liked",views:{"app-liked@main.app":{templateUrl:"views/liked/liked.html",controller:"LikedCtrl"}},resolve:{lists:["ListService",function(e){return e.getUserLists()}]}}).state("main.app.liked.list-details",{url:"/list-details/:listId",views:{"main-view@main":{templateUrl:"views/liked/list-details.html",controller:"ListDetailsCtrl"}},resolve:{list:["ListService","$stateParams",function(e,t){return e.getList(t.listId)}]}}).state("main.app.liked.new-list",{url:"/new-list",views:{"main-view@main":{templateUrl:"views/liked/new-list.html",controller:"NewListCtrl"}}}).state("main.app.account",{url:"/account",views:{"app-account@main.app":{templateUrl:"views/account/account.html"}}}).state("main.app.account.profile",{url:"/profile",views:{"my-profile@main.app.account":{templateUrl:"views/account/profile.html",controller:"ProfileCtrl"}},resolve:{user:["ProfileService",function(e){return e.getUserData()}]},data:{authorizedRoles:[o.loginUser]}}).state("main.app.account.orders",{url:"/orders",views:{"my-orders@main.app.account":{templateUrl:"views/account/orders.html",controller:"OrdersCtrl"}},resolve:{orders:["OrderService",function(e){return e.getUserOrders()}]}}).state("main.app.shopping-cart",{url:"/shopping-cart",views:{"main-view@main":{templateUrl:"views/shopping-cart/cart.html",controller:"ShoppingCartCtrl"}},resolve:{shoppingCart:["ShoppingCartService",function(e){return e.getShoppingCart()}]}}).state("main.app.checkout",{url:"/checkout",views:{"main-view@main":{templateUrl:"views/checkout/checkout.html",controller:"CheckoutCtrl"}},resolve:{shoppingCart:["ShoppingCartService",function(e){return e.getShoppingCart()}]}}).state("main.app.checkout.address",{url:"/address",views:{"main-view@main":{templateUrl:"views/checkout/address.html",controller:"CheckoutAddressCtrl"}},resolve:{user_shipping_addresses:["CheckoutService",function(e){return e.getUserShippingAddresses()}]}}).state("main.app.checkout.card",{url:"/card",views:{"main-view@main":{templateUrl:"views/checkout/card.html",controller:"CheckoutCardCtrl"}},resolve:{user_credit_cards:["CheckoutService",function(e){return e.getUserCreditCards()}]}}).state("main.app.checkout.promo-code",{url:"/promo-code",views:{"main-view@main":{templateUrl:"views/checkout/promo-code.html",controller:"CheckoutPromoCodeCtrl"}}}).state("main.app.checkout.thanks",{url:"/thanks",views:{"main-view@main":{templateUrl:"views/checkout/thanks.html"}}}),t.otherwise("/intro/walkthrough-welcome")}]).directive("bg",function(){return{restrict:"A",require:"^multiBg",scope:{ngSrc:"@"},link:function(e,t,o,s){t.on("load",function(){s.animateBg()})}}}).directive("showHideContainer",function(){return{scope:{},controller:["$scope","$element","$attrs",function(e,t,o){e.show=!1,e.toggleType=function(t){t.stopPropagation(),t.preventDefault(),e.show=!e.show,e.$broadcast("toggle-type",e.show)}}],templateUrl:"views/common/templates/show-hide-password.html",restrict:"A",replace:!1,transclude:!0}}).directive("showHideInput",function(){return{scope:{},link:function(e,t,o){e.$on("toggle-type",function(e,o){var s=t[0];s.getAttribute("type"),o||s.setAttribute("type","password"),o&&s.setAttribute("type","text")})},require:"^showHideContainer",restrict:"A",replace:!1,transclude:!1}}).directive("preImg",function(){return{restrict:"E",transclude:!0,scope:{ratio:"@",helperClass:"@"},controller:["$scope",function(e){e.loaded=!1,this.hideSpinner=function(){e.$apply(function(){e.loaded=!0})}}],templateUrl:"views/common/templates/pre-img.html"}}).directive("spinnerOnLoad",function(){return{restrict:"A",require:"^preImg",scope:{ngSrc:"@"},link:function(e,t,o,s){t.on("load",function(){s.hideSpinner()})}}}).directive("socialShare",["$cordovaSocialSharing","$ionicPlatform","$timeout",function(e,t,o){return{restrict:"A",scope:{share:"="},controller:["$scope",function(e){}],link:function(s,a,i,r){s.disabled=!1;var n=s.share;s.disable=function(){s.disabled=!0,o(function(){a.attr("disabled",s.disabled)},0)},s.enable=function(){s.disabled=!1,o(function(){a.attr("disabled",s.disabled)},0)},a.on("click",function(o){s.disabled?(o.preventDefault(),o.stopImmediatePropagation()):(s.disable(),t.ready(function(){try{e.share("Check the following post: "+n.title,null,null,null).then(function(e){s.enable()},function(e){s.enable()})}catch(e){s.enable()}}))})}}}]).directive("dynamicAnchorFix",["$ionicGesture","$timeout","$cordovaInAppBrowser",function(e,t,o){return{scope:{},link:function(e,s,a){t(function(){var e=s.find("a");e.length>0&&angular.forEach(e,function(e){var t=angular.element(e);t.bind("click",function(e){e.preventDefault(),e.stopPropagation();var t=e.currentTarget.href,s={};o.open(t,"_blank",s).then(function(e){}).catch(function(e){console.log("error: "+e)})})})},10)},restrict:"A",replace:!1,transclude:!1}}]),angular.module("yabiz_shopApp.views",[]).run(["$templateCache",function(e){e.put("views/common/intro.html",'<ion-view class="" cache-view="false"><ion-nav-view name="intro-view"></ion-nav-view></ion-view>'),e.put("views/walkthrough/welcome.html",'<ion-view class="welcome-view" cache-view="false"><ion-content has-bouncing="false"><div class="row images-row"><div class="col images-outer-col"><div class="row row-bottom logo-row"><div class="col"><div class="logo-container"><pre-img ratio="_1_1" helper-class="square-image"><img class="logo-image" ng-src="./img/walkthrough/welcome_logo-Bazaar.png" spinner-on-load></pre-img></div></div></div><div class="row illustration-row"><div class="col"><div class="illustration-container"><pre-img ratio="_20_9" helper-class="square-image"><img class="illustration-image" ng-src="./img/walkthrough/welcome_illustration.png" spinner-on-load></pre-img></div></div></div></div></div><div class="row actions-row"><div class="col"><a class="button button-block get-started-button" ui-sref="main.app.feed.fashion()">立即开始</a></div></div><div class="row actions-row"><div class="col"><a class="button button-block button-clear auth-button" ui-sref="intro.auth-login()">登录</a></div><div class="col"><a class="button button-block button-clear auth-button" ui-sref="intro.auth-signup()">注册</a></div></div></ion-content></ion-view>'),e.put("views/walkthrough/learn.html",'<ion-view class="learn-view" cache-view="false"><ion-header-bar class="learn-header"><div class="buttons"><button class="button button-clear skip-button" ng-show="show_skip_button" ng-click="skipIntro()">忽视</button></div></ion-header-bar><ion-content class="learn-content" has-bouncing="false"><div class="row slides-row"><div class="col"><ion-slide-box class="learn-slider" ng-class="{\'hide-pager\':show_call_to_action_button}" show-pager="true" delegate-handle="getting-started-slides" pager-click="pagerClicked(index)" on-slide-changed="slideChanged($index)"><ion-slide><section class="slide-learn learn-sub-view" ng-include="\'views/walkthrough/slide-1.html\'"></section></ion-slide><ion-slide><section class="slide-questions getting-started-sub-view" ng-include="\'views/getting-started/slide-2.html\'"></section></ion-slide><ion-slide><section class="slide-pick-categories getting-started-sub-view" ng-include="\'views/getting-started/slide-3.html\'"></section></ion-slide></ion-slide-box></div></div><div class="row actions-row" ng-show="show_call_to_action_button"><div class="col"><a class="button button-full action-button" ui-sref="intro.auth-signup()">进入</a></div></div></ion-content></ion-view>'),e.put("views/auth/login.html",'<ion-view class="login-view auth-view" cache-view="false"><ion-content has-bouncing="false"><div class="row form-heading"><div class="col"><h3 class="form-title">社交账号登录</h3><div class="social-share text-center"><a class="social-share-icon icon-qq" ng-click="authenticateUser(\'qq\')"></a> <a class="social-share-icon icon-facebook" ng-click="authenticateUser(\'facebook\')"></a> <a class="social-share-icon icon-google" ng-click="authenticateUser(\'googleplus\')"></a> <a class="social-share-icon icon-wechat" ng-click="authenticateUser(\'weixin\')"></a></div></div></div><div class="row form-separator"><hr class="separator-line"><span class="separator-mark">或者</span><hr class="separator-line"></div><div class="row form-row"><div class="col"><span class="form-divider">用户登录</span><form name="login_form" class="form-container" novalidate><div class="input-list list list-inset"><label class="item item-input" ng-class="{\'has-error\':login_form.email.$invalid && !login_form.email.$pristine }"><input type="text" placeholder="手机号码或邮箱" name="username" minlength="3" maxlength="20" ng-model="user.username" required></label><div class="error-container" ng-show="login_form.username.$error && !login_form.username.$pristine " ng-messages="login_form.username.$error"><div ng-messages-include="error-list.html"></div></div><label class="item item-input" show-hide-container ng-class="{\'has-error\':login_form.password.$invalid && !login_form.password.$pristine }"><input type="password" placeholder="密码" name="password" ng-model="user.password" required show-hide-input></label><div class="error-container last-error-container" ng-show="login_form.password.$error && !login_form.password.$pristine " ng-messages="login_form.password.$error"><div ng-messages-include="error-list.html"></div></div></div><!--<p ng-show="error" class="message error">{{error}}</p>--> <button type="submit" class="button button-block auth-action-button" ng-click="doLogIn()" ng-disabled="login_form.$invalid">登录</button></form></div></div><div class="row"><div class="col alternative-actions login-actions"><a class="action-link button button-small button-clear" ui-sref="intro.auth-forgot-password()">忘记密码</a></div><div class="col alternative-actions login-actions"><a class="action-link button button-small button-clear" ui-sref="main.app.feed.fashion()">立即使用</a></div><div class="col alternative-actions login-actions"><a class="action-link button button-small button-clear" ui-sref="intro.auth-signup()">注册</a></div></div></ion-content></ion-view>'),e.put("views/auth/signup.html",'<ion-view class="signup-view auth-view" cache-view="false"><ion-content has-bouncing="false"><div class="row form-heading"><div class="col"><h3 class="form-title">社交账号登录</h3><div class="social-share text-center"><a class="social-share-icon icon-qq" ng-click="authenticateUser(\'qq\')"></a> <a class="social-share-icon icon-facebook" ng-click="authenticateUser(\'facebook\')"></a> <a class="social-share-icon icon-google" ng-click="authenticateUser(\'googleplus\')"></a> <a class="social-share-icon icon-wechat" ng-click="authenticateUser(\'weixin\')"></a></div></div></div><div class="row form-separator"><hr class="separator-line"><span class="separator-mark">或者</span><hr class="separator-line"></div><div class="row form-row"><div class="col"><form name="signup_form" class="form-container" novalidate><div class="input-list list list-inset"><div class="row multi-inputs"><div class="col" ng-class="{\'has-error\':signup_form.firstname.$invalid && !signup_form.firstname.$pristine }"><label class="item item-input"><input type="text" placeholder="姓" name="firstname" ng-model="user.firstname" required></label><div class="error-container" ng-show="signup_form.firstname.$error && !signup_form.firstname.$pristine " ng-messages="signup_form.firstname.$error"><div ng-messages-include="error-list.html"></div></div></div><div class="col" ng-class="{\'has-error\':signup_form.lastname.$invalid && !signup_form.lastname.$pristine }"><label class="item item-input"><input type="text" placeholder="名" name="lastname" ng-model="user.lastname" required></label><div class="error-container" ng-show="signup_form.lastname.$error && !signup_form.lastname.$pristine " ng-messages="signup_form.lastname.$error"><div ng-messages-include="error-list.html"></div></div></div></div><label class="item item-input" ng-class="{ \'has-error\' : signup_form.email.$invalid && !signup_form.email.$pristine }"><input type="email" placeholder="Email" name="email" ng-model="user.email" required class="ng-valid-email"></label><div class="error-container" ng-show="signup_form.email.$error && !signup_form.email.$pristine " ng-messages="signup_form.email.$error"><div ng-messages-include="error-list.html"></div></div><label class="item item-input" ng-class="{\'has-error\':signup_form.phone.$invalid && !signup_form.phone.$pristine }"><input type="text" placeholder="手机号码" name="phone" ng-model="user.phone" required></label><div class="error-container" ng-show="signup_form.email.$error && !signup_form.email.$pristine " ng-messages="signup_form.email.$error"><div ng-messages-include="error-list.html"></div></div><label class="item item-input" show-hide-container ng-class="{ \'has-error\' : signup_form.password.$invalid && !signup_form.password.$pristine }"><input type="password" placeholder="密码" name="password" ng-model="user.password" required minlength="3" maxlength="20" show-hide-input></label><div class="error-container" ng-show="signup_form.password.$error && !signup_form.password.$pristine" ng-messages="signup_form.password.$error"><div ng-messages-include="error-list.html"></div></div><p ng-show="error" class="message error">{{error}}</p><button type="submit" class="button button-block auth-action-button" ng-click="doSignUp(signup_form,user)" ng-disabled="signup_form.$invalid">注 册</button><p ng-show="{{error}}" class="message error ng-binding ng-hide"></p></div></form><div class="alternative-actions"><a class="action-link button button-small button-clear" ui-sref="intro.auth-login()">登录</a> <a class="action-link button button-small button-clear" ui-sref="main.app.feed.fashion()">立即使用</a></div></div></div></ion-content></ion-view>'),e.put("views/auth/forgot-password.html",'<ion-view class="forgot-password-view auth-view" cache-view="false"><ion-content has-bouncing="false"><div class="row images-row"><div class="col"><div class="illustration-container"><pre-img ratio="_27_20" helper-class="square-image"><img class="illustration-image" ng-src="./img/auth/forgot_password_illustration.png" spinner-on-load></pre-img></div></div></div><h2 class="forgot-title">找回密码</h2><div class="row form-row"><div class="col"><form name="forgot_password_form" class="form-container" novalidate><div class="input-list list list-inset"><label class="item item-input"><input type="text" placeholder="email" name="email" ng-model="user.email" required></label></div><p ng-show="error" class="message error">{{error}}</p><button type="submit" class="button button-block auth-action-button" ng-click="recoverPassword()" ng-disabled="forgot_password_form.$invalid">找回</button></form><div class="alternative-actions"><a class="action-link button button-small button-clear" ui-sref="intro.auth-login()">登录</a> <a class="action-link button button-small button-clear" ui-sref="intro.auth-signup()">注册</a></div></div></div></ion-content></ion-view>'),e.put("views/common/main.html",'<ion-view class="" cache-view="false"><ion-nav-view name="main-view"></ion-nav-view></ion-view>'),e.put("views/common/app.html",'<ion-view class="app-tabbed-view"><ion-pane><ion-tabs class="tabbed-navigation tabs-icon-top"><ion-tab title="商品" icon-off="feed-icon" icon-on="feed-icon" ui-sref="main.app.feed.fashion"><ion-nav-view name="app-feed"></ion-nav-view></ion-tab><ion-tab title="搜索" icon-off="search-icon" icon-on="search-icon" ui-sref="main.app.search"><ion-nav-view name="app-search"></ion-nav-view></ion-tab><ion-tab title="时尚" icon-off="liked-icon" icon-on="liked-icon" ui-sref="main.app.fashionSearch"><ion-nav-view name="app-fashion-search"></ion-nav-view></ion-tab><ion-tab title="关于" icon-off="account-icon" icon-on="account-icon" ui-sref="main.app.account"><ion-nav-view name="app-account"></ion-nav-view></ion-tab></ion-tabs></ion-pane></ion-view>'),
e.put("views/filters/filters.html",'<ion-view class="filters-view" cache-view="false"><ion-header-bar class="filters-header"><div class="buttons"><button class="button button-clear cancel-button" ng-click="cancelRefine()">取消</button></div><h1 class="title">过滤</h1><div class="buttons"><button class="button button-clear apply-button" ng-click="applyRefine()">应用</button></div></ion-header-bar><ion-content class="filters-content-outer"><div class="filter-tabs button-bar" filter-tabs slider="filter-tabs-slider"><filter-tab tab="1"><span class="tab-title">时尚</span></filter-tab><filter-tab tab="2"><span class="tab-title">列表</span></filter-tab><filter-tab tab="3"><span class="tab-title">范围</span></filter-tab><filter-tab tab="4"><span class="tab-title">其他</span></filter-tab></div><ion-slide-box class="filter-tabs-slider" ng-init="lockSlide()" delegate-handle="filter-tabs-slider" show-pager="false"><ion-slide><section class="filter-tab-section" ng-include="\'views/filters/tab-1.html\'"></section></ion-slide><ion-slide><section class="filter-tab-section" ng-include="\'views/filters/tab-2.html\'"></section></ion-slide><ion-slide><section class="filter-tab-section" ng-include="\'views/filters/tab-3.html\'"></section></ion-slide><ion-slide><section class="filter-tab-section" ng-include="\'views/filters/tab-4.html\'"></section></ion-slide></ion-slide-box></ion-content></ion-view>'),e.put("views/feed/feed.html",'<ion-view class="feed-view" cache-view="false"><ion-header-bar class="feed-header"><div class="logo-container"><img class="logo-image" ng-src="./img/logo.png"></div><div class="buttons"><button class="button button-clear cart-button" ui-sref="main.app.shopping-cart()"><span class="badge cart-badge">{{ shoppingCartCount }}</span> <img class="cart-image" ng-src="./img/feed/cart-icon.png"></button></div></ion-header-bar><ion-content class="categories-feeds-content" has-bouncing="false" delegate-handle="feeds-content"><sliding-list><ul center-edges class="sliding-list"><sliding-item state="main.app.feed.fashion"><a nav-transition="none" ui-sref="main.app.feed.fashion()">时尚</a></sliding-item><sliding-item state="main.app.feed.food"><a nav-transition="none" ui-sref="main.app.feed.food()">餐饮</a></sliding-item><sliding-item state="main.app.feed.travel"><a nav-transition="none" ui-sref="main.app.feed.travel()">旅游</a></sliding-item><sliding-item state="main.app.feed.deals"><a nav-transition="none" ui-sref="main.app.feed.deals()">优惠</a></sliding-item><sliding-item state="main.app.feed.real-state"><a nav-transition="none" ui-sref="main.app.feed.real-state()">中介地产</a></sliding-item></ul></sliding-list><ion-nav-view name="category-feed" class="category-feed"></ion-nav-view></ion-content></ion-view>'),e.put("views/feed/fashion.html",'<ion-view class="feed-fashion-view feed-sub-view" cache-view="false"><ion-content><section ng-include="\'views/common/fashion-sort-and-filters-bar.html\'"></section><div class="row products-row"><div class="col col-50 fashion-product-container" ng-repeat="product in results = products | orderBy:\'id\'"><div class="list card"><div class="item item-image product-image-wrapper"><a class="product-anchor" ui-sref="main.app.feed.fashion.content({productId: product.productId})"><pre-img ratio="_1_1"><img class="product-image" ng-src="{{serverUrl}}/{{ product.mediumImageUrl }}" spinner-on-load></pre-img></a></div><div class="item item-body product-description-wrapper"><h5 class="product-title"><a class="product-anchor" ui-sref="main.app.feed.fashion.content({productId: product.id})">{{ product.productName }}</a></h5><p class="product-description"><b class="actual-price">￥{{product.priceResult.defaultPrice}}</b> <span class="previous-price" ng-show="product.priceResult.promoPrice != \'0\'">￥{{product.priceResult.promoPrice}}</span></p></div></div></div></div></ion-content></ion-view>'),e.put("views/content/fashion.html",'<ion-view class="fashion-content-view" cache-view="false"><ion-header-bar class="fashion-content-header"><div class="buttons"><button class="button button-clear back-button" ng-click="goBack()">后退</button></div><h1 class="title">{{product.name}}</h1><div class="buttons"><button class="button button-clear share-button" ng-click="socialShare(\'send-text\')">分享</button></div></ion-header-bar><ion-content><ion-slide-box class="product-images-slider"><ion-slide><div class="image-container"><pre-img ratio="full"><img class="product-image" ng-src="{{ serverUrl}}/{{product.mediumImageUrl}}" spinner-on-load></pre-img></div></ion-slide><ion-slide ng-repeat="pirture in product.additionalImages.slice(0, 5) track by $index"><div ng-repeat="(key,value) in pirture" class="image-container" ng-if="key" multi-bg="[serverUrl+\'/\'+ value[0].additionalImageDetail]"></div></ion-slide></ion-slide-box><div class="row brief-info-row"><div class="col"><h3 class="product-name">{{product.productName}}</h3><div class="product-tags-container"><span ng-repeat="tag in product.productTags ">{{ tag }}&nbsp;</span></div><h4 class="product-price">￥{{product.priceResult.defaultPrice}}</h4></div></div><div class="row options-row"> <div class="col pick-color-col" ng-repeat="(name,feature) in variantTreeChoose"><button class="button button-block icon-right ion-chevron-right pick-button" ng-click="openFeatureChooser(name,feature)">{{name}} {{ \':\' + choosen_features_names[name] }}</button></div></div><div class="row"><div class="col col-25 purchase-row"><span class="description-line">数量: <b class="product-quantity ng-binding">{{cartItem.quantity}}</b></span></div><div class="col col-25 quantity-input-col"><div class="button-bar input-number ng-pristine ng-untouched ng-valid"><a class="button icon ion-minus-round value-down-button" ng-click="minusOne(cartItem.quantity)"></a> <a class="button icon ion-plus-round value-up-button" ng-click="plusOne(cartItem.quantity)"></a></div></div><div class="col col-50 purchase-row"><button class="button button-block add-to-cart-button" ng-disabled="!showSubmitBtn" ng-click="addToCart(cartItem)">加入购物车</button></div></div><div class="row description-row" data-ng-bind-html="product.wapDesc "></div> </ion-content></ion-view>'),e.put("views/feed/food.html",'<ion-view class="feed-food-view feed-sub-view" cache-view="false"><ion-content><section ng-include="\'views/common/sort-and-filters-bar.html\'"></section><div class="products-row"><div class="food-product-container" ng-repeat="product in results = products"><div class="row info-row"><div class="col logo-col"><a class="product-anchor" ui-sref="main.app.feed.food.content({productId: product.productId})"><pre-img ratio="_1_1"><img class="logo-image" ng-src="{{serverUrl}}/{{ product.mediumImageUrl }}" spinner-on-load></pre-img></a></div><div class="col description-col"><div class="row"><div class="col data-col"><h5 class="product-title"><a class="product-anchor" ui-sref="main.app.feed.food.content({productId: product.productId})">{{product.productName}}</a></h5><p class="address-and-price-container"><span class="product-address"><span class="product-price-range">￥{{ product.priceResult.minimumPrice }}-{{ product.priceResult.maximumPrice }}</span></p><p class="product-tags-container"><span class="product-tag" ng-repeat="tag in product.productTags">{{tag}}</span></p></div><div class="col col-20 actions-col"><span class="product-rating rating-{{ product.averageRating | floor }}">{{ product.averageRating }}</span></div></div></div></div><div class="row row-center images-row"><div class="col col-20 image-wrapper" ng-repeat="pirture in product.additionalImages.slice(0, 5) track by $index"><pre-img ratio="_1_1" ng-repeat="(key,value) in pirture"><img class="product-image" ng-if="key" ng-src="{{serverUrl}}/{{value[0].additionalImageDetail}}" spinner-on-load></pre-img><div class="has-more-images" ng-if="$index == 4 && product.additionalImages.length > 5"><span class="images-count">{{ product.additionalImages.length - 5 }}</span></div></div></div></div></div></ion-content></ion-view>'),e.put("views/content/food.html",'<ion-view class="food-content-view" cache-view="false"><ion-header-bar class="food-content-header"><div class="buttons"><button class="button button-clear back-button" ng-click="goBack()">回退</button></div><h1 class="title">{{product.productName}}</h1><div class="buttons"><button class="button button-clear share-button">分享</button></div></ion-header-bar><ion-content><ion-slide-box class="product-images-slider" show-pager="false"><ion-slide><div class="image-container" multi-bg="[serverUrl+\'/\'+product.mediumImageUrl]"><div class="product-illustration-container"><img class="product-illustration" ng-src="./img/sample-images/travel/TravelIcon1.png"></div></div></ion-slide><ion-slide ng-repeat="pirture in product.additionalImages.slice(0, 5) track by $index"><div ng-repeat="(key,value) in pirture" class="image-container" ng-if="key" multi-bg="[serverUrl+\'/\'+ value[0].additionalImageDetail]"></div></ion-slide></ion-slide-box><div class="row brief-info-row"><div class="col col-80"><h3 class="product-name">{{product.productName}}</h3><!--<h5 class="product-style">Homemade style</h5>--></div><div class="col col-20"><span class="product-price-range">￥{{ product.priceResult.minimumPrice }}-{{ product.priceResult.maximumPrice }}</span></div></div><div class="row rating-row"><div class="col rating-col"><span class="product-rating rating-{{ product.averageRating | floor }}">{{product.averageRating}}</span> <span class="product-rating rating-2">{{product.averageRating}}2</span></div><div class="col rating-col">口味:<i class="icon ion-ios-star-outline"></i> <span class="other-rating">4.2</span></div><div class="col rating-col">环境:<i class="icon ion-ios-star-outline"></i> <span class="other-rating">4.4</span></div><div class="col rating-col">价格:<i class="icon ion-ios-star-outline"></i> <span class="other-rating">3.8</span></div><div class="col rating-col">服务:<i class="icon ion-ios-star-outline"></i> <span class="other-rating">8</span></div></div><div class="row schedules-and-address-row"><div class="col"><button class="button button-block icon-right ion-chevron-right schedules-button" ng-class="{\'with-value\': product.selected_schedule.name}" ng-click="openSchedules()"><span class="button-title">营业时间</span> <span class="button-data" ng-if="product.selected_schedule.name">{{ product.selected_schedule.name }}</span></button><hr class="buttons-divider"><button class="button button-block icon-right ion-chevron-right addresses-button" ng-class="{\'with-value\': product.address}" ng-click="openAddresses()"><span class="button-title">地址</span> <span class="button-data" ng-if="product.selected_address">{{product.selected_address.street}}</span></button></div></div><div class="row address-map-row"><div class="col"><div class="map-wrapper" data-tap-disabled="true"></div></div></div><div class="row tags-row"><div class="col product-tags-container"><span class="product-tag" ng-repeat="tag in product.productTags">{{tag}}</span></div></div><hr class="product-sections-divider"><h3 class="product-sub-title">用户照片</h3><div class="row row-center images-row"><div class="col col-20 image-wrapper" ng-repeat="picture in product.additionalImages.slice(0, 5) track by $index"><pre-img ratio="_1_1" ng-repeat="(key,value) in picture"><img style="width:100%" class="product-image" ng-if="key" ng-src="{{serverUrl}}/{{value[0].additionalImageDetail}}" spinner-on-load></pre-img><div class="has-more-images" ng-if="$index == 4 && product.additionalImages.length > 5"><span class="images-count">{{ product.additionalImages.length - 5 }}</span></div></div></div><div class="row upload-row"><div class="col"><button class="button button-block upload-photo-button" ng-click="uploadPhoto()">上传照片</button></div></div><hr class="product-sections-divider"><h3 class="product-sub-title">热门菜肴</h3><div class="row popular-dishes-row"><div class="col"><div class="row dish-row" ng-repeat="dish in product.dishes"><div class="col col-75"><h5 class="dish-name">{{ dish.name }}</h5><progress-bar min="0" max="5" ng-model="dish.rating"></progress-bar></div><div class="col col-bottom dishes-rate-col"><i class="icon ion-ios-heart-outline"></i> <span class="dish-rate-value">{{ dish.rating }}</span></div></div></div></div><hr class="product-sections-divider"><h3 class="product-sub-title">用户评论</h3><article class="row review-item" ng-repeat="review in [].constructor(2) track by $index"><div class="col"><div class="row top-row"><div class="col image-col"><pre-img ratio="_1_1"><img class="review-image" ng-src="https://s3.amazonaws.com/uifaces/faces/twitter/andyvitale/73.jpg" spinner-on-load></pre-img></div><div class="col description-col"><h3 class="review-author-name">李逍遥</h3><div class="row icons-container"><div class="col icon-group"><i class="icon ion-navicon"></i> <span class="icon-text">2 个评价</span></div><div class="col icon-group"><i class="icon ion-ionic"></i> <span class="icon-text">26 照片</span></div></div></div><div class="col reputation-col"><span class="review-date">{{\'07/07/2016\' | amDateFormat:\'YYYY, MMM Do\'}}</span><div class="rating-outer"><span class="review-rating rating-{{ product.rating | floor }}">{{product.rating}}</span></div></div></div><div class="row middle-row"><div class="col"><p class="review-description">这篇评论是漫长的，但仍然是回忆生动的。我们在LA厄拉为婚礼。我只想到它是一个伟大的餐厅，但从来没有想到它作为一个事件空间。婚礼是在一个星期日，我们有整个使用空间。</p></div></div><div class="row bottom-row"><div class="col review-other-ratings-container"><div class="row"><div class="col rating-col"><i class="icon ion-ios-star-outline"></i> <span class="other-rating">4.2</span></div><div class="col rating-col"><i class="icon ion-ios-star-outline"></i> <span class="other-rating">4.4</span></div><div class="col rating-col"><i class="icon ion-ios-star-outline"></i> <span class="other-rating">3.8</span></div></div></div></div></div></article><div class="row all-reviews-row"><div class="col"><button class="button button-block icon-right ion-chevron-right read-all-reviews-button" ng-click="showAllReviews()">全部评价 (15)</button></div></div><div class="row write-review-row"><div class="col"><button class="button button-block new-review-button" ng-click="newReview()">发表评论</button></div></div><h5 class="incorrect-info-title">信息错误?</h5><span class="incorrect-info-sub-title">提交错误信息!</span></ion-content></ion-view>'),e.put("views/feed/travel.html",'<ion-view class="feed-travel-view feed-sub-view" cache-view="false"><ion-content><section ng-include="\'views/common/sort-and-filters-bar.html\'"></section><div class="products-row"><div class="travel-product-container" ng-repeat="product in results = products"><div class="row image-row"><div class="col product-image-container"><div multi-bg="[serverUrl+\'/\'+product.largeImageUrl]" interval="3000"><div class="row row-center content-inside-image"><div class="col"><img class="travel-product-icon" ng-src=""><h2 class="product-name"><a class="product-anchor">{{product.productName}}</a></h2><h4 class="product-tagline">{{product.categoryName}}</h4></div></div></div></div></div><div class="row info-row"><div class="col description-col"><h5 class="product-title"><a class="product-anchor">{{product.productName}} {{product.productName}}</a></h5><p class="product-description">{{product.description}}</p><p class="product-address">{{product.address}} 印度洋周围一群田园般的岛屿</p></div><div class="col col-25"><div class="row"><div class="col col-50 rating-col"><i class="icon ion-android-star-outline"></i> <span class="rating-value">{{product.averageRating}}</span></div><div class="col col-50 reviews-col"><i class="icon ion-chatbubble-working"></i> <span class="reviews-value">8</span></div></div></div></div></div></div></ion-content></ion-view>'),e.put("views/content/travel.html",'<ion-view class="content-travel-view" cache-view="false"><ion-header-bar align-title="left" class="bar-positive"><div class="buttons"><button class="button" ng-click="goBack()">Back</button></div><h1 class="title">Travel content</h1></ion-header-bar><ion-content class="padding"><div>{{product.name}}</div></ion-content></ion-view>'),e.put("views/feed/deals.html",'<ion-view class="feed-deals-view feed-sub-view" cache-view="false"><ion-content><section ng-include="\'views/common/sort-and-filters-bar.html\'"></section><div class="products-row"><div class="card deals-product-container" ng-repeat="product in results = products"><div class="row row-center top-row"><div class="col col-66 logo-col"><img class="deal-logo" ng-src="{{product.picture}}"></div><div class="col shop-col"><button class="button shop-button">CLAIM</button></div></div><div class="row middle-row"><div class="col col-75"><h5 class="product-title"><a class="product-anchor">{{product.name}}</a></h5><p class="product-description">{{product.description}}</p></div><div class="col bookmark-col"><a class="button button-icon icon ion-pricetag bookmark-button"></a></div></div><div class="row bottom-row"><div class="col col-75"><span class="deal-code">{{product.code}}</span></div><div class="col time-col"><div class="time-left-container"><span class="deal-time-left" ng-class="{\'days-left-1\': ((product.expiration_date | amDifference : null : \'hours\') <= 10) && ((product.expiration_date | amDifference : null : \'hours\') > 0), \'days-left-0\': (product.expiration_date | amDifference : null : \'hours\') < 0}" am-time-ago="product.expiration_date"></span> <i class="icon ion-android-time"></i></div></div></div></div></div></ion-content></ion-view>'),e.put("views/content/deals.html",'<ion-view class="content-deals-view" cache-view="false"><ion-nav-title><span>Deals content</span></ion-nav-title><ion-content class="padding"></ion-content></ion-view>'),e.put("views/feed/real-state.html",'<ion-view class="feed-real-state-view feed-sub-view" cache-view="false"><ion-content><section ng-include="\'views/common/sort-and-filters-bar.html\'"></section><div class="products-row list" ng-repeat="category in results = products"><div class="item item-divider">{{ category.categoryName }}</div><div class="real-state-product-container" ng-repeat="product in category.products"><div class="row image-row"><div class="col product-image-container"><div multi-bg="[serverUrl+\'/\'+product.largeImageUrl]" interval="3000"></div></div></div><div class="row description-row"><div class="col"><h2 class="product-price"><a class="product-anchor">￥ {{product.priceResult.defaultPrice}}</a></h2><p class="product-address">{{product.description}}</p></div><div class="col col-33 amenities-col"><i class="theme-icon icon-bed"></i> <span>{{product.bedrooms}}1</span> <i class="theme-icon icon-toilet"></i> <span>{{product.bathrooms}}2</span></div></div></div></div></ion-content></ion-view>'),e.put("views/content/real-state.html",'<ion-view class="content-real-state-view" cache-view="false"><ion-header-bar align-title="left" class="bar-positive"><div class="buttons"><button class="button" ng-click="goBack()">Back</button></div><h1 class="title">Real State content</h1></ion-header-bar><ion-content class="padding"><div>{{product.price}}</div></ion-content></ion-view>'),e.put("views/search/search.html",'<ion-view class="search-view" cache-view="false"><ion-header-bar class="search-header"><div class="row item-input-inset search-row"><div class="col col-75"><label class="item-input-wrapper search-label"><i class="icon ion-ios-search placeholder-icon"></i> <input type="search" placeholder="Search" name="search_query" ng-model="search.query"></label></div><div class="col"><button class="button button-clear cancel-button" ng-click="cancelSearch()">取消</button></div></div></ion-header-bar><ion-content><!-- <div ng-if="results.length == 0">      <h2>No results</h2>    </div> --><div><section ng-include="views/common/sort-and-filters-bar.html"></section><div class="search-results-container"><div class="products-row"><div class="food-product-container" ng-repeat="product in results = (products | searchField : \'product.productName\' | filter:search.query)"><div class="row info-row"><div class="col logo-col"><a class="product-anchor" ui-sref="main.app.feed.food.content({productId: product.id})"><pre-img ratio="_1_1"><img class="logo-image" ng-src="{{serverUrl}}/{{ product.mediumImageUrl }}" spinner-on-load></pre-img></a></div><div class="col description-col"><div class="row"><div class="col data-col"><h5 class="product-title"><a class="product-anchor">{{product.productName}}</a><!--<a class="product-anchor" ui-sref="main.app.feed.food.content({productId: product.productId})">{{product.productName}}</a>  --></h5><p class="address-and-price-container"><span class="product-address">{{product.description}}</span> <span class="product-price-range">￥{{ product.priceResult.minimumPrice }}-{{ product.priceResult.maximumPrice }}</span></p><p class="product-tags-container"><span class="product-tag" ng-repeat="tag in product.productTags">{{tag}}</span></p></div><div class="col col-20 actions-col"><span class="product-rating rating-{{ product.averageRating | floor }}">{{product.averageRating}}</span></div></div></div></div><div class="row row-center images-row"><div class="col col-20 image-wrapper" ng-repeat="picture in product.additionalImages.slice(0, 5) track by $index"><pre-img ratio="_1_1" ng-repeat="(key,value) in picture"><img class="product-image" ng-if="key" ng-src="{{serverUrl}}/{{value[0].additionalImageDetail}}" spinner-on-load></pre-img><div class="has-more-images" ng-if="$index == 4 && product.additionalImages.length > 5"><span class="images-count">{{ product.additionalImages.length - 5 }}</span></div></div></div></div></div></div></div></ion-content></ion-view>'),e.put("views/search/fashion_search.html",'<ion-view class="feed-fashion-view" cache-view="false"><ion-header-bar class="search-header"><div class="row item-input-inset search-row"><div class="col col-75"><label class="item-input-wrapper search-label"><i class="icon ion-ios-search placeholder-icon"></i> <input type="search" placeholder="Search" name="search_query" ng-model="search.query"></label></div><div class="col"><button class="button button-clear cancel-button" ng-click="cancelSearch()">取消</button></div></div></ion-header-bar><ion-content><!-- <div ng-if="results.length == 0">      <h2>No results</h2>    </div> --><div class="row products-row"><div class="col col-50 fashion-product-container" ng-repeat="product in results = products | searchField : \'product.productName\' | filter:search.query| orderBy:\'id\'"><div class="list card"><div class="item item-image product-image-wrapper"><a class="product-anchor" ui-sref="main.app.feed.fashion.content({productId: product.productId})"><pre-img ratio="_1_1"><img class="product-image" ng-src="{{serverUrl}}/{{ product.mediumImageUrl }}" spinner-on-load></pre-img></a></div><div class="item item-body product-description-wrapper"><h5 class="product-title"><a class="product-anchor" ui-sref="main.app.feed.fashion.content({productId: product.id})">{{ product.productName }}</a></h5><p class="product-description"><b class="actual-price">￥{{product.priceResult.defaultPrice}}</b> <span class="previous-price" ng-show="product.priceResult.promoPrice != \'0\'">￥{{product.priceResult.promoPrice}}</span></p></div></div></div></div></ion-content></ion-view>'),e.put("views/liked/liked.html",'<ion-view class="liked-view" cache-view="false"><ion-header-bar align-title="left" class="bar-positive"><h1 class="title">Liked!</h1></ion-header-bar><ion-content class="padding"><button class="button button-block button-positive" ui-sref="main.app.liked.new-list()">Start a new list</button><div class="item item-divider">APRIL</div><div class="card" ng-repeat="list in lists"><div class="item item-text-wrap"><p>Name: {{list.name}}</p><p>Category: {{list.category}}</p><p>Tags: {{list.tags}}</p><p>Creation Date: {{list.creation_date}}</p>Products: <span ng-repeat="product in list.products">{{product.id}}</span><div><a ui-sref="main.app.liked.list-details({listId: list.id})">Go to list details page</a></div></div></div></ion-content></ion-view>'),e.put("views/liked/list-details.html",'<ion-view class="liked-view" cache-view="false"><ion-header-bar align-title="left" class="bar-positive"><div class="buttons"><button class="button" ng-click="goBack()">Back</button></div><h1 class="title">List Details</h1></ion-header-bar><ion-content class="padding"><img ng-src="http://lorempixel.com/200/100"><h2>List Details</h2><div class="card"><div class="item item-text-wrap"><div>List Name: {{list.name}}</div><div>Created: {{list.creation_date}}</div><a ui-sref="main.app.feed.fashion.content()">Go to fashion content page</a></div></div></ion-content></ion-view>'),e.put("views/liked/new-list.html",'<ion-view class="liked-view" cache-view="false"><ion-header-bar align-title="left" class="bar-positive"><div class="buttons"><button class="button" ng-click="cancel()">Cancel</button></div><h1 class="title">New List</h1><div class="buttons"><button class="button" ng-click="create()">Create</button></div></ion-header-bar><ion-content class="padding"><div class="list list-inset"><label class="item item-input"><input type="text" placeholder="Name"></label><label class="item item-input"><input type="text" placeholder="Tags"></label><label class="item item-input item-select"><div class="input-label">Category</div><select><option>Blue</option><option selected="selected">Green</option><option>Red</option></select></label></div></ion-content></ion-view>'),e.put("views/account/account.html",'<ion-view class="account-view" cache-view="false"><ion-header-bar class="account-header"><h1 class="title">我的</h1></ion-header-bar><ion-pane><ion-tabs class="account-tabs tabs-top tabs"><ion-tab title="个人中心" ui-sref="main.app.account.profile"><ion-nav-view name="my-profile"></ion-nav-view></ion-tab><ion-tab title="订单信息" ui-sref="main.app.account.orders"><ion-nav-view name="my-orders"></ion-nav-view></ion-tab></ion-tabs></ion-pane></ion-view>'),e.put("views/account/profile.html",'<ion-view class="account-profile-view account-sub-view" cache-view="false"><ion-content><div class="row user-info-row"><div class="col col-25"><pre-img ratio="_1_1"><img class="profile-image" ng-src="{{serverUrl}}/content/control/stream?contentId={{user.logoImgId}}" spinner-on-load></pre-img></div><div class="col col-75 col-center user-info-col"><h3 class="user-welcome">欢迎 {{user.name}}!</h3><p class="user-email">{{user.email}}</p></div></div><div class="user-data-row"><div class="row"><label class="col item item-input item-stacked-label"><span class="input-label">姓名</span> <input type="text" placeholder="姓名" ng-model="user.name" ng-disabled="true"></label></div><div class="row"><label class="col item item-input item-stacked-label"><span class="input-label">电子邮箱</span> <input type="email" placeholder="电子邮件" ng-model="user.email" ng-disabled="true"></label></div><div class="row"><label class="col item item-input item-stacked-label"><span class="input-label">密码</span> <input type="password" placeholder="密码" ng-model="user.password" ng-disabled="true"></label></div></div><h3 class="account-sub-title">默认收货地址</h3><div class="address-chooser" ng-click="openAddressesPopover($event)"><button class="button button-block icon-right addresses-popover-button" ng-class="{\'ion-chevron-up\': addresses_popover.isShown(), \'ion-chevron-down\' : !addresses_popover.isShown()}"><!--{{data.selected_address.paAddress1 || \'选择地址\'}}--><div ng-if="data.selected_address" ng-repeat="a in user_shipping_addresses | filter: data.selected_address">{{ a.paAddress1}}</div></button></div><h3 class="account-sub-title">默认支付方式</h3><div class="card-chooser" ng-click="openCardsPopover($event)"><button class="button button-block icon-right cards-popover-button" ng-class="{\'ion-chevron-up\': addresses_popover.isShown(), \'ion-chevron-down\' : !addresses_popover.isShown()}">{{data.selected_card.number || \'Select Credit Card\'}}</button></div><div class="list account-divider"><div class="item item-divider"></div></div><h3 class="account-sub-title">通知设置</h3><div class="row notifications-row"><div class="col"><ul class="list notifications-list"><li class="item item-toggle"><span class="notifications-text">促销</span><label class="toggle"><input type="checkbox" ng-model="notifications.promotions"><div class="track"><div class="handle"></div></div></label></li><li class="item item-toggle"><span class="notifications-text">收货状态</span><label class="toggle"><input type="checkbox" ng-model="notifications.shipment_updates"><div class="track"><div class="handle"></div></div></label></li></ul></div></div><div class="list account-divider"><div class="item item-divider"></div></div><div class="row invite-and-rate-row"><div class="col"><button class="button button-block invite-friends-button">邀请朋友</button> <button class="button button-block button-clear rate-app-button"><i class="icon ion-android-star"></i> <span>Rate this app!</span></button></div></div><div class="row logout-terms-row"><div class="col"><div class="row terms-row"><div class="col col-35"><a class="button button-clear button-small legal-stuff-button">政策&隐私</a></div><div class="col col-40"><a class="button button-clear button-small legal-stuff-button">团队</a></div><div class="col col-25"><a class="button button-clear button-small legal-stuff-button">问&答</a></div></div><a class="button button-clear logout-button" ng-click="logout()">退出</a></div></div></ion-content></ion-view>'),e.put("views/account/orders.html",'<ion-view class="account-orders-view account-sub-view" cache-view="false" view-title="My Orders"><ion-content><div class="orders-row"><div class="card order-item" ng-repeat="order in orders.payOrders"><div class="item item-divider order-header"><span class="header-title">{{order.orderId}} - {{order.orderDate | amDateFormat:\'YYYY/MM/DD\'}}</span></div><div class="item item-text-wrap order-content"><div class="row order-product" ng-repeat="item in order.orderItems track by $index"><div class="col col-20 product-image-col"><div class="product-image-container" multi-bg="[serverUrl+item.mediumImageUrl]"></div></div><div class="col col-center name-col"><span class="product-name">{{item.description}}</span></div><div class="col col-center"><span class="product-price">{{item.totalAmount|currency:"￥"}}</span></div></div></div><div class="item item-divider order-footer shipped"><span class="status-title">待支付</span></div></div><div class="card order-item" ng-repeat="order in orders.shipOrders"><div class="item item-divider order-header"><span class="header-title">{{order.orderId}} - {{order.orderDate | amDateFormat:\'YYYY/MM/DD\'}}</span></div><div class="item item-text-wrap order-content"><div class="row order-product" ng-repeat="item in order.orderItems track by $index"><div class="col col-20 product-image-col"><div class="product-image-container" multi-bg="[serverUrl+item.mediumImageUrl]"></div></div><div class="col col-center name-col"><span class="product-name">{{item.description}}</span></div><div class="col col-center"><span class="product-price">{{item.totalAmount|currency:"￥"}}</span></div></div></div><div class="item item-divider order-footer shipped"><span class="status-title">待收货</span></div></div><div class="card order-item" ng-repeat="order in orders.reviewOrders"><div class="item item-divider order-header"><span class="header-title">{{order.orderId}} - {{order.orderDate | amDateFormat:\'YYYY/MM/DD\'}}</span></div><div class="item item-text-wrap order-content"><div class="row order-product" ng-repeat="item in order.orderItems track by $index"><div class="col col-20 product-image-col"><div class="product-image-container" multi-bg="[serverUrl+item.mediumImageUrl]"></div></div><div class="col col-center name-col"><span class="product-name">{{item.description}}</span></div><div class="col col-center"><span class="product-price">{{item.totalAmount|currency:"￥"}}</span></div></div></div><div class="item item-divider order-footer delivered"><span class="status-title">待评价</span></div></div><div class="card order-item" ng-repeat="order in orders.cancelOrders"><div class="item item-divider order-header"><span class="header-title">{{order.orderId}} - {{order.orderDate | amDateFormat:\'YYYY/MM/DD\'}}</span></div><div class="item item-text-wrap order-content"><div class="row order-product" ng-repeat="item in order.orderItems track by $index"><div class="col col-20 product-image-col"><div class="product-image-container" multi-bg="[serverUrl+item.mediumImageUrl]"></div></div><div class="col col-center name-col"><span class="product-name">{{item.description}}</span></div><div class="col col-center"><span class="product-price">{{item.totalAmount|currency:"￥"}}</span></div></div></div><div class="item item-divider order-footer canceled"><span class="status-title">订单取消</span></div></div><div class="card order-item" ng-repeat="order in orders.finishOrders"><div class="item item-divider order-header"><span class="header-title">{{order.orderId}} - {{order.orderDate | amDateFormat:\'YYYY/MM/DD\'}}</span></div><div class="item item-text-wrap order-content"><div class="row order-product" ng-repeat="item in order.orderItems track by $index"><div class="col col-20 product-image-col"><div class="product-image-container" multi-bg="[serverUrl+item.mediumImageUrl]"></div></div><div class="col col-center name-col"><span class="product-name">{{item.description}}</span></div><div class="col col-center"><span class="product-price">{{item.totalAmount|currency:"￥"}}</span></div></div></div><div class="item item-divider order-footer" class="finished"><span class="status-title">订单完成</span></div></div></div></ion-content></ion-view>'),
e.put("views/shopping-cart/cart.html",'<ion-view class="shopping-cart-view" cache-view="false"><ion-header-bar class="shopping-cart-header"><div class="buttons"><button class="button button-clear close-button" ng-click="close()">关闭</button></div><h1 class="title">购物车</h1><div class="buttons"><button class="button button-clear checkout-button" ui-sref="main.app.checkout()" ng-show="shoppingCart.shoppingCartItems.length > 0">结算</button></div></ion-header-bar><ion-content class="shopping-cart-content" has-bouncing="false"><div class="row row-center empty-cart-row" ng-if="!shoppingCart"><div class="col"><h3 class="no-products-title">空空入也</h3><div class="illustration-container"><pre-img ratio="_34_25"><img class="illustration-image" ng-src="./img/shopping-cart/cart-empty.png" spinner-on-load></pre-img></div></div></div><div ng-if="shoppingCart"><ul class="list shopping-bill"><li class="item"><div class="row"><div class="col"><span class="bill-item-title">总价</span></div><div class="col"><span class="bill-item-value">{{ shoppingCart.shoppingCart.displayGrandTotal | currency: \'RMB \' }}</span></div></div></li><li class="item"><div class="row"><div class="col"><span class="bill-item-title">销售税</span></div><div class="col"><span class="bill-item-value">{{ shoppingCart.shoppingCart.orderTaxTotal | currency: \'RMB \' }}</span></div></div></li><li class="item bill-total"><div class="row"><div class="col"><span class="bill-item-title">小计</span></div><div class="col"><span class="bill-item-value">{{ shoppingCart.shoppingCart.orderSubTotal | currency: \'RMB \' }}</span></div></div></li></ul><div class="item item-divider shopping-cart-divider">购物车 {{ shoppingCart.shoppingCartItems.length }} 个商品</div><div class="products-in-cart-row"><div class="card product-in-cart" ng-repeat="cartItem in shoppingCart.shoppingCartItems"><div class="item item-divider product-header"><div class="row"><div class="col col-center"><span class="product-name">{{cartItem.name}}</span></div><div class="col col-center"><button class="button button-icon icon ion-close-round remove-button" ng-click="removeFromCart($index)"></button></div></div></div><div class="item item-text-wrap product-content"><div class="row"><div class="col col-33 product-image-col"><div class="product-image-container" multi-bg="[serverUrl + cartItem.mediumImageUrl]"></div></div><div class="col col-center product-description-col"><span class="description-line">Style: <b>{{cartItem.style}}</b></span> <span class="description-line">Color: <b>{{cartItem.color}}</b></span> <span class="description-line">Size: <b>{{cartItem.size}}</b></span><div class="row"><div class="col col-50"><span class="description-line">数量: <b class="product-quantity">{{cartItem.quantity}}</b></span></div><div class="col quantity-input-col"><div class="button-bar input-number ng-pristine ng-untouched ng-valid"><a class="button icon ion-minus-round value-down-button" ng-click="minusOne(cartItem,$index)"></a> <a class="button icon ion-plus-round value-up-button" ng-click="plusOne(cartItem,$index)"></a></div><!--<number-input ng-model="cartItem.quantity"></number-input>--></div></div></div></div></div><div class="item item-divider product-footer"><div class="row"><div class="col"><span class="shipping-text">发货</span> <span class="shipping-text">预计2到3天到货</span></div><div class="col col-center"><span class="order-total">{{cartItem.itemSubTotal | currency: \'RMB \'}}</span></div></div></div></div></div></div></ion-content></ion-view>'),e.put("views/checkout/checkout.html",'<ion-view class="checkout-view" cache-view="false"><ion-header-bar class="checkout-header"><div class="buttons"><button class="button button-clear cancel-button" ng-click="cancel()">取消</button></div><h1 class="title">结算</h1></ion-header-bar><ion-content has-bouncing="false" class="checkout-content"><div class="row order-brief-row"><div class="col col-67"><div class="row illustration-row"><div class="col illustration-col"><img class="order-brief-illustration" ng-src="./img/checkout/checkout_illustration.png"></div><div class="col"><span class="order-brief-callout">{{shoppingCart.shoppingCartItems.length}}件商品准备中！</span></div></div></div><div class="col col-33 col-center order-total-col"><div class="order-total-wrapper"><span class="brief-total-title">小计:</span> <span class="brief-total">{{ shoppingCart.shoppingCart.displaySubTotal | currency: \'RMB \' }}</span></div></div></div><div class="row address-row"><div class="col"><div class="address-chooser"><a class="button button-block icon-right ion-chevron-right choose-addresses-button" ng-class="{\'aa\': addresses_popover.isShown(), \'bb\' : !addresses_popover.isShown()}" ui-sref="main.app.checkout.address()">{{ getSelectedAddress || \'Shipping Address\'}}</a></div><input type="hidden" ng-model="order.shipping_contact_mech_id" name="shipping_contact_mech_id"> <input type="hidden" ng-model="order.shipToCustomerPartyId" name="shipToCustomerPartyId"></div></div><div class="row promo-code-row"><div class="col"><label class="item item-input promo-item"><span class="input-label">促销代码</span> <input type="text"></label></div></div><div class="card list filter-group alt-filter-group"><div class="item item-divider">送货方式</div><ion-list class="show-filters filter-options-container" ng-repeat="shipment in carries"><ion-radio name="shipping_method" ng-model="order.shipping_method" ng-click="calculateAmount(shipment.estimate);" ng-value="shipment.shipmentMethodTypeId+\'@\'+shipment.partyId">{{shipment.description}}:&nbsp;-&nbsp;{{shipment.estimate | currency : \'￥\'}}</ion-radio></ion-list></div><div class="card list filter-group alt-filter-group"><div class="item item-divider">支付方式</div><ion-list class="show-filters filter-options-container" ng-repeat="payment in payments" ng-show="payment.paymentMethodTypeId===\'EXT_ALIPAY\' || payment.paymentMethodTypeId===\'EXT_COD\'"><ion-radio name="checkOutPaymentId" ng-model="order.checkOutPaymentId" ng-value="payment.paymentMethodTypeId">{{ (paymentNames | filter: {id:payment.paymentMethodTypeId})[0].name }}</ion-radio></ion-list></div><h3 class="checkout-sub-title">我的订单</h3><ul class="list checkout-products"><li class="item checkout-product" ng-repeat="cartItem in shoppingCart.shoppingCartItems"><div class="row"><div class="col col-20 product-image-col"><div class="product-image-container" multi-bg="[serverUrl + cartItem.mediumImageUrl]"></div></div><div class="col col-50 col-center"><span class="product-name">{{cartItem.description}}</span></div><div class="col col-center"><span class="product-price">{{cartItem.itemSubTotal|currency: \'RMB \'}}</span></div></div></li></ul><ul class="list checkout-bill"><li class="item"><div class="row"><div class="col"><span class="bill-item-title">费用</span></div><div class="col"><span class="bill-item-value">{{ shoppingCart.shoppingCart.displaySubTotal | currency: \'RMB \'}}</span></div></div></li><li class="item"><div class="row"><div class="col"><span class="bill-item-title">销售税</span></div><div class="col"><span class="bill-item-value">{{ shoppingCart.shoppingCart.orderTaxTotal | currency: \'RMB \' }}</span></div></div></li><li class="item"><div class="row"><div class="col"><span class="bill-item-title">快递费</span></div><div class="col"><span class="bill-item-value">{{ shoppingCart.shoppingCart.orderShippingTotal | currency: \'RMB \' }}</span></div></div></li><li class="item bill-total"><div class="row"><div class="col"><span class="bill-item-title">小计</span></div><div class="col"><span class="bill-item-value">{{ shoppingCart.shoppingCart.displayGrandTotal | currency: \'RMB \'}}</span></div></div></li></ul></ion-content><ion-footer-bar class="checkout-footer"><a class="button button-full place-order-button" ng-click="processOrder(order)">点击结算</a></ion-footer-bar></ion-view>'),e.put("views/checkout/address.html",'<ion-view class="checkout-address-view" cache-view="false"><ion-header-bar class="checkout-address-header"><div class="buttons"><button class="button button-clear cancel-button" ng-click="cancel()">取消</button></div><h1 class="title">收货地址</h1></ion-header-bar><ion-content class="checkout-address-content" has-bouncing="false"><div class="row everything-else-row"><div class="col"><div ng-if="user_shipping_addresses.length == 0"><div class="new-address-button-outer"><button class="button button-block new-address-button" ng-click="showNewAddressPopup()">新增地址</button></div></div><div ng-if="user_shipping_addresses.length > 0"><h3 class="shipping-address-title">选择收货地址</h3><div class="address-chooser" ng-click="openAddressesPopover($event)"><button class="button button-block icon-right addresses-popover-button" ng-class="{\'ion-chevron-up\': addresses_popover.isShown(), \'ion-chevron-down\' : !addresses_popover.isShown()}">{{data.selected_address.paAddress1 || \'选择地址\'}}</button></div></div><div class="address-details-container" ng-show="data.selected_address.street"><div class="row"><label class="col item item-input item-stacked-label"><span class="input-label">姓名</span><p class="input-data">{{data.selected_address.full_name}}</p></label></div><div class="row"><label class="col col-50 item item-input item-stacked-label"><span class="input-label">地址</span><p class="input-data">{{data.selected_address.street}}</p></label><label class="col col-50 item item-input item-stacked-label"><span class="input-label">邮编</span><p class="input-data">{{data.selected_address.apt_suite}}</p></label></div><div class="row"><label class="col col-50 item item-input item-stacked-label"><span class="input-label">城市</span><p class="input-data">{{data.selected_address.city}}</p></label><label class="col col-25 item item-input item-stacked-label"><span class="input-label">省/州</span><p class="input-data">{{data.selected_address.state}}</p></label><label class="col col-25 item item-input item-stacked-label"><span class="input-label">邮编</span><p class="input-data">{{data.selected_address.postal_code}}</p></label></div><div class="row"><label class="col item item-input item-stacked-label"><span class="input-label">手机号码</span><p class="input-data">{{data.selected_address.phone}}</p></label></div></div></div></div><div class="row actions-row"><div class="col"><a class="button button-full action-button" ng-click="saveSelectedAddress(data.selected_address)">保存&继续</a></div></div></ion-content></ion-view>'),e.put("views/checkout/card.html",'<ion-view class="checkout-card-view" cache-view="false"><ion-header-bar class="checkout-card-header"><div class="buttons"><button class="button button-clear cancel-button" ng-click="cancel()">Cancel</button></div><h1 class="title">Credit Card</h1></ion-header-bar><ion-content class="checkout-card-content" has-bouncing="false"><div class="row everything-else-row"><div class="col"><div ng-if="user_credit_cards.length == 0"><div class="new-card-button-outer"><button class="button button-block new-card-button" ng-click="showNewCardPopup()">New Credit Card</button></div></div><div ng-if="user_credit_cards.length > 0"><h3 class="credit-card-title">Select Credit Card</h3><div class="card-chooser" ng-click="openCardsPopover($event)"><button class="button button-block icon-right cards-popover-button" ng-class="{\'ion-chevron-up\': cards_popover.isShown(), \'ion-chevron-down\' : !cards_popover.isShown()}">{{data.selected_card.number || \'Select Credit Card\'}}</button></div></div><div class="illustration-container"><pre-img ratio="_37_26"><img class="illustration-image" ng-src="./img/checkout/card_illustration.png" spinner-on-load></pre-img></div></div></div><div class="row actions-row"><div class="col"><a class="button button-full action-button" ng-click="saveSelectedCreditCard(data.selected_card)">Save Card & Continue</a></div></div></ion-content></ion-view>'),e.put("views/checkout/promo-code.html",'<ion-view class="checkout-promo-view" cache-view="false"><ion-header-bar align-title="left" class="bar-positive"><div class="buttons"><button class="button" ng-click="cancel()">Cancel</button></div><h1 class="title">Promo code</h1></ion-header-bar><ion-content class="padding"><h2>Promo code here</h2></ion-content></ion-view>'),e.put("views/checkout/thanks.html",'<ion-view class="checkout-thanks-view" cache-view="false"><ion-header-bar class="checkout-thanks-header"><h1 class="title">Checkout</h1></ion-header-bar><ion-content has-bouncing="false" class="checkout-thanks-content"><div class="row row-center thanks-row"><div class="col"><h3 class="thanks-title">Your order is being prepared for shipping!</h3><div class="illustration-container"><pre-img ratio="_41_22"><img class="illustration-image" ng-src="./img/checkout/checkout_thanks_illustration.png" spinner-on-load></pre-img></div><div class="ok-button-outer"><a class="button button-block ok-button" ui-sref="main.app.feed.fashion">Great!</a></div></div></div></ion-content></ion-view>'),e.put("views/common/templates/show-hide-password.html",'<div class="show-hide-input" ng-transclude></div><a class="toggle-view-anchor" on-touch="toggleType($event)"><span class="ion-eye-disabled" ng-show="show"></span> <span class="ion-eye" ng-show="!show"></span></a>'),e.put("views/common/templates/pre-img.html",'<div class="pre-img {{ratio}} {{ helperClass }}" ng-class="{ \'finish-loading\': loaded }"><ion-spinner ng-show="!loaded" class="spinner-on-load"></ion-spinner><ng-transclude></ng-transclude></div>'),e.put("views/checkout/partials/edit-card-popup.html",'<div class="card-details-container"><div class="row"><label class="col item item-input item-stacked-label"><span class="input-label">信用卡</span> <input class="input-data" type="text" ng-model="card.number" placeholder="Required"></label></div><div class="row"><label class="col item item-input item-stacked-label"><span class="input-label">卡号</span> <input class="input-data" type="text" ng-model="card.full_name" placeholder="Required"></label></div><div class="row"><label class="col col-50 item item-input item-stacked-label"><span class="input-label">Expiration</span> <input class="input-data" type="text" ng-model="card.expiration" placeholder="mm/yy"></label><label class="col col-50 item item-input item-stacked-label"><span class="input-label">CCV</span> <input class="input-data" type="text" ng-model="card.ccv" placeholder="Required"></label></div></div>'),e.put("views/checkout/partials/edit-shipping-address-popup.html",'<div class="address-details-container"><div class="row"><label class="col item item-input item-stacked-label"><span class="input-label">姓名</span> <input class="input-data" type="text" ng-model="address.paAttnName" placeholder="Required"></label></div><div class="row"><label class="col col-50 item item-input item-stacked-label"><span class="input-label">省&州</span><div class="card-chooser" ng-click="openProvincePopover($event)"><button class="button button-block icon-right cards-popover-button" ng-class="{\'ion-chevron-up\': province_popover.isShown(), \'ion-chevron-down\' : !province_popover.isShown()}"><p ng-repeat="u in chnGeoList  | filter: address.paStateProvinceGeoId ">{{ u.name || \'选择省(直辖市)\'}}</p></button></div></label><label class="col col-50 item item-input item-stacked-label"><span class="input-label">城市</span><!--<input class="input-data" type="text" ng-model="address.paCity" placeholder="Houston">--><div class="card-chooser" ng-click="openCityPopover($event)"><button class="button button-block icon-right cards-popover-button" ng-class="{\'ion-chevron-up\': city_popover.isShown(), \'ion-chevron-down\' : !city_popover.isShown()}"><p ng-repeat="u in cityGeoList  | filter: address.paCity ">{{ u.name || \'选择城市\'}}</p></button></div></label></div><div class="row"><label class="col col-50 item item-input item-stacked-label"><span class="input-label">区/县</span><!--<input class="input-data" type="text" ng-model="address.paCity" placeholder="Houston">--><div class="card-chooser" ng-click="openCountyPopover($event)"><button class="button button-block icon-right cards-popover-button" ng-class="{\'ion-chevron-up\': county_popover.isShown(), \'ion-chevron-down\' : !county_popover.isShown()}"><p ng-repeat="u in countyGeoList  | filter: address.paCountyGeoId ">{{ u.name || \'选择区县\'}}</p></button></div></label><label class="col col-50 item item-input item-stacked-label"><span class="input-label">邮政编码</span> <input class="input-data" type="text" ng-model="address.paPostalCode" placeholder="11000"></label></div><div class="row"><label class="col item item-input item-stacked-label"><span class="input-label">地址行</span> <input class="input-data" type="text" ng-model="address.paAddress1" placeholder="Street"></label></div><div class="row"><label class="col item item-input item-stacked-label"><span class="input-label">手机</span> <input class="input-data" type="text" ng-model="address.paMobilePhone" placeholder="+123 55 66 77"></label></div></div>'),e.put("views/checkout/partials/new-shipping-address-popup.html",'<div class="address-details-container"><div ng-show="error" class="row"><div class="has-errors">{{error}}</div></div><div class="row"><label class="col col-50 item item-input item-stacked-label"><span class="input-label">姓名</span> <input class="input-data" type="text" ng-model="address.paAttnName" placeholder="必填"></label></div><div class="row"><label class="col col-50 item item-input item-stacked-label"><span class="input-label">省&州</span><!--<input class="input-data" type="text" ng-model="address.paStateProvinceGeoId" placeholder="AK">--><div class="card-chooser" ng-click="openProvincePopover($event)"><button class="button button-block icon-right cards-popover-button" ng-class="{\'ion-chevron-up\': province_popover.isShown(), \'ion-chevron-down\' : !province_popover.isShown()}"><p ng-repeat="u in chnGeoList  | filter: address.paStateProvinceGeoId " ng-if="address.paStateProvinceGeoId">{{ u.name || \'选择\'}}</p></button></div></label><label class="col col-50 item item-input item-stacked-label"><span class="input-label">城市</span><div class="card-chooser" ng-click="openCityPopover($event)"><button class="button button-block icon-right cards-popover-button" ng-class="{\'ion-chevron-up\': city_popover.isShown(), \'ion-chevron-down\' : !city_popover.isShown()}"><!--{{ address.paCity|| \'选择\'}}--><p ng-repeat="u in cityGeoList  | filter: address.paCity " ng-if="address.paCity">{{ u.name || \'选择\'}}</p></button></div></label></div><div class="row"><label class="col col-50 item item-input item-stacked-label"><span class="input-label">区县</span><!--<input class="input-data" type="text" ng-model="address.paCity" placeholder="Houston">--><div class="card-chooser" ng-click="openCountyPopover($event)"><button class="button button-block icon-right cards-popover-button" ng-class="{\'ion-chevron-up\': county_popover.isShown(), \'ion-chevron-down\' : !county_popover.isShown()}"><!--{{ address.paCity|| \'选择\'}}--><p ng-repeat="u in countyGeoList  | filter: address.paCountyGeoId " ng-if="address.paCountyGeoId">{{ u.name || \'选择\'}}</p></button></div></label><label class="col col-50 item item-input item-stacked-label"><span class="input-label">邮政编码</span> <input class="input-data" type="text" ng-model="address.paPostalCode" placeholder="必填"></label></div><div class="row"><label class="col item item-input item-stacked-label"><span class="input-label">地址行</span> <input class="input-data" type="text" ng-model="address.paAddress1" placeholder="Street"></label><!--<label class="col col-50 item item-input item-stacked-label"> <span class="input-label">Apt/Suite</span> <input class="input-data" type="text" ng-model="address.apt_suite" placeholder="Optional"> </label>--></div><div class="row"><label class="col item item-input item-stacked-label"><span class="input-label">手机</span> <input class="input-data" type="text" ng-model="address.paMobilePhone" placeholder="+123 55 66 77"></label></div></div>'),e.put("views/checkout/partials/new-card-popup.html",'<div class="card-details-container"><div class="row"><label class="col item item-input item-stacked-label"><span class="input-label">银联卡</span> <input class="input-data" type="text" placeholder="Required"></label></div><div class="row"><label class="col item item-input item-stacked-label"><span class="input-label">卡号</span> <input class="input-data" type="text" placeholder="Required"></label></div><div class="row"><label class="col col-50 item item-input item-stacked-label"><span class="input-label">Expiration</span> <input class="input-data" type="text" placeholder="mm/yy"></label><label class="col col-50 item item-input item-stacked-label"><span class="input-label">CCV</span> <input class="input-data" type="text" placeholder="Required"></label></div></div>'),e.put("views/common/templates/multi-bg.html",'<div class="multi-bg-outer" ng-class="{\'finish-loading\': loaded }"><img bg class="multi-bg {{ helperClass }}" ng-src="{{ bg_img }}"> <span class="bg-overlay"></span><ion-spinner ng-show="!loaded" class="spinner-on-load"></ion-spinner><!-- <span ng-show="!loaded" class="spinner-on-load ion-load-c"></span> --><ng-transclude></ng-transclude></div>'),e.put("views/content/fashion/color-chooser.html",'<ion-list class="color-options-list"><ion-radio ng-repeat="color in colorList" ng-model="data_chosen_color" ng-change="featureColorChange(color)" ng-value="\'{{ color.colorId }}\'">{{ color.colorName }}</ion-radio>'),e.put("views/content/fashion/size-chooser.html",'<ion-list class="size-options-list"> <ion-radio ng-repeat="size in sizeList" name="chosen_size" ng-model="chosen_size" ng-change="featureSizeChange(size)" ng-value="\'{{ size.sizeId }}\'">{{ size.sizeName }}</ion-radio></ion-list>'),e.put("views/content/fashion/feature-chooser.html",'<ion-list class="size-options-list"><ion-radio ng-repeat="feature in features" name="chosen_feature_{{name}}" ng-model="chosen_feature" ng-change="featureChange(feature)" ng-value="\'{{ feature.productFeatureId }}\'">{{ feature.description }}</ion-radio></ion-list>'),e.put("views/content/food/schedules.html",'<div class="row schedules-title-row"><div class="col col-80"><h4 class="title-name">营业时间</h4></div><div class="col col-20"><i class="icon ion-android-time title-icon"></i></div></div><div class="list schedules-list"><div class="item">星期一 <span class="item-note">上午 12:00 到 下午 10:00</span></div><div class="item">星期二 <span class="item-note">上午 12:00 到 下午 10:00</span></div><div class="item">星期三 <span class="item-note">上午 12:00 到 下午 10:00</span></div><div class="item">星期四 <span class="item-note">上午 12:00 到 下午 12:00 am</span></div><div class="item">星期五 <span class="item-note">上午 12:00 到 下午 12:00 am</span></div><div class="item">星期六 <span class="item-note">上午 12:00 到 下午 12:00 am</span></div><div class="item">星期日 <span class="item-note close-note">停止营业</span></div></div><hr class="schedules-divider"><div class="row schedules-title-row"><div class="col col-70"><h4 class="title-name">本店使用</h4></div><div class="col col-30"><i class="icon ion-card title-icon">银联卡</i></div></div>'),e.put("views/content/food/addresses.html",'<div class="list addresses-list"><div class="address-item row row-center" ng-repeat="address in addresses"><label class="col item item-radio"><input type="radio" name="pick_address" ng-model="selected_address" ng-value="address" ng-change="selectAddress(address)"><div class="radio-content"><div class="item-content disable-pointer-events"><span class="address-name">{{address.street}}</span></div><i class="radio-icon disable-pointer-events icon ion-checkmark"></i></div></label></div></div>'),e.put("views/content/food/progress-bar.template.html",'<div class="progress-bar"><div class="progress-value" style="width:{{ (model*100)/max }}%"></div></div>'),e.put("views/feed/templates/sliding-list.html",'<div class="pre-transparency {{ active_class | cleanStateClass }}"></div><ion-scroll class="sliding-list-scroll" delegate-handle="sliding-list-scroll" scrollbar-x="false" has-bouncing="false" direction="x"><div class="sliding-list-bg {{ active_class | cleanStateClass }}" ng-transclude></div></ion-scroll><div class="post-transparency {{ active_class | cleanStateClass }}"></div>'),e.put("views/feed/templates/sliding-item.html",'<li class="sliding-item {{this.state | cleanStateClass}}" ng-click="select(this)" ng-class="{ active: this.selected }" ng-transclude></li>'),e.put("views/filters/tab.template.html",'<a class="button" ng-class="{ \'active\': selected }" ng-transclude></a>'),e.put("views/filters/tag-checkbox.template.html",'<label class="item item-checkbox"><div class="checkbox checkbox-input-hidden disable-pointer-events"><input type="checkbox" ng-model="model"><h3 class="checkbox-title">{{ title }}</h3></div><div class="item-content disable-pointer-events" ng-transclude></div></label>'),e.put("views/filters/tag-radio.template.html",'<label class="item item-radio"><input type="radio" name="{{name || \'radio-group\'}}" ng-model="model" ng-value="value"><div class="radio-content"><div class="item-content disable-pointer-events" ng-transclude></div></div></label>'),e.put("views/filters/color-radio.template.html",'<label class="item item-radio"><input type="radio" name="{{name || \'radio-group\'}}" ng-model="model" ng-value="value"><div class="radio-content"><div class="item-content disable-pointer-events" style="border-color:{{value}}; background-color:{{value}}" ng-transclude></div></div></label>'),e.put("views/filters/number-input.template.html",'<div class="button-bar input-number"><a class="button icon ion-minus-round value-down-button" ng-click="minusOne()"></a> <a class="button icon ion-plus-round value-up-button" ng-click="plusOne()"></a></div>'),e.put("views/getting-started/custom-checkbox.template.html",'<label class="item item-checkbox"><div class="checkbox checkbox-input-hidden disable-pointer-events"><input type="checkbox" ng-model="model"> <i class="checkbox-icon"></i><h3 class="checkbox-title">{{ title }}</h3></div><div class="item-content disable-pointer-events" ng-transclude></div></label>'),e.put("views/sort/sort.html",'<ion-list class="sort-options-list"><ion-radio ng-model="sort_order" ng-value="\'Distance\'">Distance</ion-radio><ion-radio ng-model="sort_order" ng-value="\'Price\'">Price</ion-radio><ion-radio ng-model="sort_order" ng-value="\'Rating\'">Rating</ion-radio><ion-radio ng-model="sort_order" ng-value="\'Alphabetical\'">Alphabetical</ion-radio></ion-list>'),e.put("views/sort/fashionSort.html",'<ion-list class="sort-options-list"><ion-radio ng-model="sort_order" ng-value="\'\'">综合排序</ion-radio><ion-radio ng-model="sort_order" ng-value="\'SortProductField:totalTimesViewed\'">最具人气</ion-radio><ion-radio ng-model="sort_order" ng-value="\'SortProductField:totalQuantityOrdered\'">销量</ion-radio><ion-radio ng-model="sort_order" ng-value="\'SortProductField:averageCustomerRating\'">评价</ion-radio></ion-list>')}]).controller("SignupCtrl",["$scope","$state","$ionicLoading","$timeout","$ionicModal","$ionicPopup","AuthService","OAUTH_SERVER_URL","$http","PersonRegister",function(e,t,o,s,a,i,r,n,c,l){e.doSignUp=function(a,i){o.show({template:"正在创建账户..."}),console.log(i),a.$valid&&(l.get(i,function(o){console.log(o.resultData),o.resultData&&o.resultData.partyId?t.go("intro.auth-login"):e.error=o.resultData.errorMessage},function(t){e.error=t.toString(),o.hide()}),s(function(){o.hide()},800))},e.authenticateUser=function(t){r.authenticateUser(t,e.user)},a.fromTemplateUrl("views/legal/privacy-policy.html",{scope:e,animation:"slide-in-up"}).then(function(t){e.privacy_policy_modal=t}),a.fromTemplateUrl("views/legal/terms-of-service.html",{scope:e,animation:"slide-in-up"}).then(function(t){e.terms_of_service_modal=t}),e.showTerms=function(){e.terms_of_service_modal.show()},e.showPrivacyPolicy=function(){e.privacy_policy_modal.show()}}]).controller("ForgotPasswordCtrl",["$scope","$state","$ionicLoading","$timeout",function(e,t,o,s){e.user={},e.user.email="",e.recoverPassword=function(){console.log("recover password"),o.show({template:"Recovering password..."}),s(function(){t.go("main.app.feed.fashion"),o.hide()},800)}}]),angular.module("gbcui_shopApp.account",["gbcui_shopApp.account.directives","gbcui_shopApp.account.services","gbcui_shopApp.account.controllers"]),angular.module("gbcui_shopApp.account.controllers",[]).controller("ProfileCtrl",["$scope","user","$ionicPopover","$ionicPopup","$ionicActionSheet","$state","AuthService","SERVER_URL","GetAssociatedStateList","PersonAddressDel","PersonAddressUpdate","PersonAddressAdd","SetDefaultPersonProfile",function(e,t,o,s,a,i,r,n,c,l,d,p,u){var v=[{full_name:"王二麻子",number:"**** **** **** 4295",type:"银联",ccv:556,expiration:"11/18/2016"}];e.serverUrl=n,e.user=t,e.user_credit_cards=v,e.user_shipping_addresses=t.contactMech,e.data={},e.data.selected_card=v[0],console.log("default shipp address:",t.defaultShipAddr.partyAndContactMech),e.data.selected_address=t.defaultShipAddr.partyAndContactMech,e.user.name=t.firstName+" "+t.lastName,e.user.password="pepe123456789",e.show_new_address_button=1,e.show_new_card_button=!1,e.notifications={},e.notifications.promotions=!1,e.notifications.shipment_updates=!0,console.log("ProfileCtrl:e.user=",e),c.get({countryGeoId:"CHN",listOrderBy:"geoId"},function(t){console.log(t),(t.resultData||t.resultData.stateList)&&(e.chnGeoList=t.resultData.stateList)}),o.fromTemplateUrl("views/checkout/partials/address-chooser-popover.html",{scope:e}).then(function(t){e.addresses_popover=t}),o.fromTemplateUrl("views/checkout/partials/card-chooser-popover.html",{scope:e}).then(function(t){e.cards_popover=t}),e.openAddressesPopover=function(t){e.addresses_popover.show(t)},e.selectShippingAddress=function(t){u.set({defaultShipAddr:t.contactMechId},function(o){console.log("set default ship address success:",t),e.data.selected_address=t},function(e){console.log("set defalut ship address error",e)}),e.addresses_popover.hide()},e.openCardsPopover=function(t){e.cards_popover.show(t)},e.selectCreditCard=function(t){e.cards_popover.hide()},e.logout=function(){a.show({titleText:"确定退出?",destructiveText:"退出",cancelText:"取消",cancel:function(){return!0},destructiveButtonClicked:function(){r.logout(),i.go("intro.auth-login")}})},e.showEditCardPopup=function(t){e.card=t;var o=s.show({cssClass:"popup-outer edit-card-view",templateUrl:"views/checkout/partials/edit-card-popup.html",title:"**** "+t.number.slice(-4),scope:e,buttons:[{text:"关闭"},{text:"删除",type:"delete-button",onTap:function(e){}},{text:"编辑",onTap:function(e){}}]});o.then(function(e){e&&console.log(e)})},e.openProvincePopover=function(t){e.province_popover.show(t)},e.selectProvince=function(t){c.get({countryGeoId:t.id,listOrderBy:"geoId"},function(t){console.log(t),(t.resultData||t.resultData.stateList)&&(e.cityGeoList=t.resultData.stateList,e.city_length=t.resultData.stateList.length)}),e.countyGeoList="",e.province_popover.hide()},e.openCityPopover=function(t){e.city_popover.show(t)},e.selectCity=function(t){c.get({countryGeoId:t.id,listOrderBy:"geoId"},function(t){console.log(t),(t.resultData||t.resultData.stateList)&&(e.countyGeoList=t.resultData.stateList,e.county_length=t.resultData.stateList.length)}),e.city_popover.hide()},e.openCountyPopover=function(t){e.county_popover.show(t)},e.selectCounty=function(t){e.county_popover.hide()},e.showEditAddressPopup=function(t){o.fromTemplateUrl("views/checkout/partials/city-chooser-popover.html",{scope:e}).then(function(t){e.city_popover=t}),o.fromTemplateUrl("views/checkout/partials/province-chooser-popover.html",{scope:e}).then(function(t){e.province_popover=t}),o.fromTemplateUrl("views/checkout/partials/county-chooser-popover.html",{scope:e}).then(function(t){e.county_popover=t}),e.address=t,c.get({countryGeoId:t.paStateProvinceGeoId,listOrderBy:"geoId"},function(t){console.log(t),(t.resultData||t.resultData.stateList)&&(e.cityGeoList=t.resultData.stateList,e.province_length=t.resultData.stateList.length)}),c.get({countryGeoId:t.paCity,listOrderBy:"geoId"},function(t){console.log(t),(t.resultData||t.resultData.stateList)&&(e.countyGeoList=t.resultData.stateList,e.county_length=t.resultData.stateList.length);
}),s.show({cssClass:"popup-outer edit-shipping-address-view",templateUrl:"views/checkout/partials/edit-shipping-address-popup.html",title:t.street,scope:e,buttons:[{text:"关闭",opTap:function(t){return console.log("close=",e.address),e.province_popover.remove(),e.city_popover.remove(),e.county_popover.remove(),"closed"}},{text:"删除",type:"delete-button",onTap:function(t){return console.log("delete=",e.address),e.province_popover.remove(),e.city_popover.remove(),e.county_popover.remove(),l.get({contactMechId:e.address.contactMechId},function(t){console.log("delete address success:",t),e.addresses_popover.remove(),angular.forEach(e.user_shipping_addresses,function(t,o){t.contactMechId===e.address.contactMechId&&e.user_shipping_addresses.splice(o,1)}),e.user_shipping_addresses&&(e.data.selected_address=e.user_shipping_addresses[0]),o.fromTemplateUrl("views/checkout/partials/address-chooser-popover.html",{scope:e}).then(function(t){e.addresses_popover=t})},function(e){console.log("delete address success:",e)}),e.addresses_popover.remove(),"deleted"}},{text:"编辑",onTap:function(t){console.log("edit=",e.address),e.province_popover.remove(),e.city_popover.remove(),e.county_popover.remove();var o={address1:e.address.paAddress1,attnName:e.address.paAttnName,city:e.address.paCity,countyGeoId:e.address.paCountyGeoId,mobilePhone:e.address.paMobilePhone,postalCode:e.address.paPostalCode,stateProvinceGeoId:e.address.paStateProvinceGeoId,contactMechId:e.address.contactMechId};return console.log("editAddress",o),d.get(o,function(e){console.log("update address success:",e)},function(e){console.log("delete address err:",e)}),"updated"}}]}).then(function(e){console.log(e)})},e.showNewAddressPopup=function(){e.error="",e.address={},o.fromTemplateUrl("views/checkout/partials/city-chooser-popover.html",{scope:e}).then(function(t){e.city_popover=t}),o.fromTemplateUrl("views/checkout/partials/province-chooser-popover.html",{scope:e}).then(function(t){e.province_popover=t}),o.fromTemplateUrl("views/checkout/partials/county-chooser-popover.html",{scope:e}).then(function(t){e.county_popover=t});var t=s.show({cssClass:"popup-outer new-shipping-address-view",templateUrl:"views/checkout/partials/new-shipping-address-popup.html",title:"新地址",scope:e,buttons:[{text:"关闭"},{text:"新建",onTap:function(t){if(console.log(e.address),e.address&&e.address.paAttnName&&e.address.paAddress1&&e.address.paCountyGeoId&&e.address.paCity&&e.address.paMobilePhone&&e.address.paPostalCode&&e.address.paStateProvinceGeoId){var s={address1:e.address.paAddress1,attnName:e.address.paAttnName,city:e.address.paCity,countyGeoId:e.address.paCountyGeoId,mobilePhone:e.address.paMobilePhone,postalCode:e.address.paPostalCode,stateProvinceGeoId:e.address.paStateProvinceGeoId,contactMechId:""};p.save(s,function(t){return console.log("add address success:",t),e.user_shipping_addresses.push(e.address),e.addresses_popover.remove(),o.fromTemplateUrl("views/checkout/partials/address-chooser-popover.html",{scope:e}).then(function(t){e.addresses_popover=t}),"added"},function(e){return console.log("add address err:",e),e})}else e.error="请完善地址信息!",t.preventDefault()}}]});t.then(function(e){e&&console.log(e)})}}]).controller("OrdersCtrl",["$scope","orders","OrderService","SERVER_URL",function(e,t,o,s){e.serverUrl=s,e.orders=t}]),angular.module("gbcui_shopApp.account.directives",[]).directive("testDirective",["$timeout",function(e){return{restrict:"A",scope:{},controller:["$scope",function(e){}],link:function(e,t,o,s){}}}]),angular.module("gbcui_shopApp.account.services",[]).service("OrderService",["$http","$q","GetOrderHistory",function(e,t,o){this.getUserOrders=function(){var e=t.defer();return o.get(function(t){console.log(t.resultData),e.resolve(t.resultData)},function(t){e.resolve(t)}),e.promise}}]).service("ProfileService",["$http","$q","PersonBaseQuery","PersonAddressDefault","PersonAddressQuery","PersonContent",function(e,t,o,s,a,i){this.getUserData=function(){var e=t.defer();return o.get(function(t){if(t.resultData){var o=t.resultData.person;s.get(function(t){t&&t.resultData&&(o.defaultShipAddr=t.resultData),a.get(function(t){t&&t.resultData&&(o.contactMech=t.resultData.contactMech),e.resolve(o)},function(t){console.log(t),e.defer(t)})}),i.get({partyContentTypeId:"LGOIMGURL"},function(e){if(console.log(e),e&&e.resultData&&e.resultData.partyContents){var t=e.resultData.partyContents[0];console.log("partyContent=",e.resultData),t&&(o.logoImgId=t.content.contentId)}},function(e){console.log(e)}),console.log("ProfileService.getUserData=",o)}}),e.promise}}]).controller("OrdersCtrl",["$scope","orders","OrderService","SERVER_URL",function(e,t,o,s){e.serverUrl=s,e.orders=t}]),angular.module("gbcui_shopApp.auth",["gbcui_shopApp.auth.controllers","gbcui_shopApp.auth.directives","gbcui_shopApp.auth.services"]),angular.module("gbcui_shopApp.auth.directives",[]).directive("testDirective",["$timeout",function(e){return{restrict:"A",scope:{},controller:["$scope",function(e){}],link:function(e,t,o,s){}}}]),angular.module("gbcui_shopApp.auth.controllers",[]).controller("LoginCtrl",["$scope","$state","$ionicLoading","$timeout","AUTH_EVENTS","$ionicPopup","AuthService","$q",function(e,t,o,s,a,i,r){e.user={username:"csy",password:"changsy"},e.user.email="",e.user.password="",e.authenticateUser=function(t){r.authenticateUser(t,e.user)},e.doLogIn=function(){console.log(e.user),o.show({template:"正在登录..."}),r.login(e.user.username,e.user.password).$promise.then(function(e){console.log(e),e&&e.token&&e.token&&(r.storeUserCredentials(e.token),t.go("main.app.feed.fashion"),s(function(){o.hide()},500))},function(e){console.log(e),o.hide()})},e.doFacebookLogIn=function(){console.log("doing FACEBOOK log in"),o.show({template:"Loging in..."}),s(function(){t.go("main.app.feed.fashion"),o.hide()},800)},e.$on(a.unauthorized,function(e){s(function(){i.alert({title:"抱歉......",template:"登录不成功，请重新登录!"})},80)}),e.$on(a.pageNotFound,function(e){i.alert({title:"抱歉......",template:"您的网络似乎有点问题!"})}),e.$on(a.forbidden,function(e){i.alert({title:"抱歉......",template:"您的请求被拒绝!"})})}]),angular.module("gbcui_shopApp.auth.services",[]).service("AuthService",["$http","$q","USER_ROLES","UserLogin","localStorageService","OAUTH_BASE_URL","OAUTH_SERVER_URL","$rootScope","$cordovaInAppBrowser","$ionicLoading","$timeout",function(e,t,o,s,a,i,r,c,l,d,u){function v(){var e=a.get(b);e?h(e):g()}function m(e){a.set(b,e),h(e)}function h(e){w=!0,_="anonymousUser"!=e&&e.indexOf(".")!==-1?o.loginUser:o.anonymousUser}function g(){w=!0,_=o.anonymousUser}function f(){w=!0,_=o.anonymousUser,a.clearAll()}var b="appToken",w=!1,_="",y=function(e,t,o){return s.get({username:e,password:t})},C=function(){f()},k=function(e){return angular.isArray(e)||(e=[e]),w&&e.indexOf(_)!==-1};v();var S=function(o,s){var a=t.defer(),n=function(e,t,o,s){console.log("oauthlogin:resolve"),console.log(e),a.resolve(e)},d=function(e,t,o,s){a.reject(e)};if("instagram"===s||"twitter"===s||"facebook"===s||"qq"===s||"googleplus"===s){var p={location:"no",toolbar:"yes",clearsessioncache:"yes",clearcache:"yes"};l.open(i+"/oauth.login/"+s,"_blank",p).then(function(){console.log("InAppBrowser opened "+i+"/oauth.login/"+s)},function(e){console.log("Error: "+e)}),c.$on("$cordovaInAppBrowser:loadstart",function(e,t){var o=t.url.toString();if(console.log("_url="),console.log(o),o.slice(0,(r+"/oauth.callback/"+s).length)===r+"/oauth.callback/"+s){for(var a=o.split("#")[0].split("?")[1],i=a.split("&"),n={},c=0;c<i.length;c++){var d=i[c].split("=");n[d[0]]=d[1]}console.log("params"),console.log(n),u({url:o,response:n}),l.close()}}),c.$on("$cordovaInAppBrowser:exit",function(e){a.reject("The sign in flow was canceled")});var u=function(e){n(e)}}else e.post(i+"/login",{user:o}).success(n).error(d);return a.promise},P=function(){var o=this,s=t.defer(),a=function(e,t,a,i){o.resetCookie(),s.resolve(e.payload)},i=function(e,t,a,i){400===e.status&&o.resetCookie(),s.reject(e)};return e.get(Constants.API.baseUrl+"/logout").success(a).error(i),s.promise},R=function(){var o=this,s=t.defer(),a=function(e,t,o,a){s.resolve(e.payload.user)},i=function(e,t,a,i){o.resetCookie(),s.reject(e)};return e.get(Constants.API.baseUrl+"/me").success(a).error(i),s.promise},A=function(){var t=this;$cordovaLocalStorage.removeItem("sessionToken"),e.defaults.headers.common["X-Access-Token"]="",t.updateUser({profileBg:"",avatar:"",objectId:"",username:"",name:"",bio:"",location:"",website:""},{remove:!0})},$=function(t,o){var s=function(e){d.hide();var t=p.show({templateUrl:"templates/modal/error.html",title:"Error",scope:$scope,buttons:[{text:"Ok"}]});t.then(function(e){}),u(function(){t.close()},3e3)},a=function(o){console.log(o),d.show({template:"正在创建账户..."}),e({method:"post",url:r+"/oauth.callbackresult/"+t,params:o.response}).then(function(e){console.log("==============callback begin=========================="),console.log(e),console.log(e.data.userLoginId),console.log(e.data.password),console.log("==============callback end=========================="),y(e.data.userLoginId,e.data.password).$promise.then(function(e){console.log(e),e&&e.token&&e.token&&(m(e.token),u(function(){n.go("main.app.feed.fashion"),d.hide()},500))},function(e){console.log(e),d.hide()})},function(e){console.log(e)})};"facebook"===t||"twitter"===t||"instagram"===t||"qq"===t||"googleplus"===t?(d.show({template:"登录中..."}),S(o,t).then(a,s),u(function(){d.hide()},3e3)):"weixin"===t&&(d.show({template:"登录中..."}),share(1,"auth",{}))};return{login:y,logout:C,isAuthorized:k,isAuthenticated:function(){return w},role:function(){return _},storeUserCredentials:function(e){m(e)},oauthlogin:S,oauthlogout:P,oauthping:R,oauthresetCookie:A,authenticateUser:$}}]),angular.module("gbcui_shopApp.checkout",["gbcui_shopApp.checkout.directives","gbcui_shopApp.checkout.controllers","gbcui_shopApp.checkout.services"]),angular.module("gbcui_shopApp.checkout.controllers",[]).controller("CheckoutCtrl",["$scope","$state","$rootScope","CheckoutService","shoppingCart","SERVER_URL","GetCartShipments","GetStorePaymentOptions","OrderCheckout","$ionicPopup","$ionicHistory","$timeout","$q",function(e,t,o,s,a,i,r,n,c,l,d,p,u){e.shoppingCart=a,e.serverUrl=i;r.get(function(t){if("fail"!==t.responseMessage){var o=t.resultData.carrierShipmentMethodList;console.log("GetCartShipments:",o),e.carries=o}},function(e){}),e.paymentNames=[{id:"EXT_CODE",name:"货到付款"},{id:"EXT_ALIPAY",name:"支付宝"},{id:"EXT_WEIXIN",name:"微信"}],n.get().$promise.then(function(t){e.payments=t.resultData.productStorePaymentSettingList,console.log("GetStorePaymentOptions:",t.resultData)},function(e){u.reject(e)}),e.cancel=function(){var e=_.last(o.previousView);e.fromState?t.go(e.fromState,e.fromParams):t.go("main.app.shopping-cart")},e.order={},s.getUserSelectedAddress().then(function(t){t.partyAndContactMech&&(console.log(t),e.getSelectedAddress=t.partyAndContactMech.paAddress1,e.order.shipping_contact_mech_id=t.partyAndContactMech.contactMechId,e.order.shipToCustomerPartyId=t.partyAndContactMech.partyId)}),e.getSelectedCard=function(){return s.getUserSelectedCard().number},e.calculateAmount=function(t){console.log(e.shoppingCart),e.shoppingCart.shoppingCart.displayGrandTotal-=e.shoppingCart.shoppingCart.orderShippingTotal,e.shoppingCart.shoppingCart.displayGrandTotal+=t,e.shoppingCart.shoppingCart.orderShippingTotal=t},e.processOrder=function(e){return e.shipToCustomerPartyId?e.shipping_contact_mech_id?e.shipping_method?e.checkOutPaymentId?(console.log(e),e.is_gift="false",e.may_split="true",void c.get(e,function(e){if(e.resultData){var o=e.resultData.payment;"cod"===o?(l.alert({title:"下单成功"}),d.nextViewOptions({historyRoot:!0,disableAnimate:!0,expire:300}),p(function(){d.nextViewOptions({historyRoot:!1,disableAnimate:!1})},300),t.go("main.app.feed.fashion")):"alipay"===o&&(console.log("OrderCheckout:",e.resultData),pingpp.createPayment(e.resultData.charge,function(e,o){if(console.log(e),"success"==e){console.log(e);var s=l.alert({title:"支付成功",template:"您已经成功支付!"});s.then(function(e){t.go("main.app.feed.fashion")})}else if("fail"==e){var s=l.alert({title:"支付失败",template:"您支付不成功!错误信息:"+o});s.then(function(e){$state.go("app.index")})}}))}},function(e){console.log(e),u.reject(e)})):void l.alert({title:"下订单!",template:"请选择支付方式"}):void l.alert({title:"下订单!",template:"请选择配送方式"}):void l.alert({title:"下订单!",template:"请选择收货地址"}):void l.alert({title:"下订单!",template:"请选择收货人"})}}]).controller("CheckoutAddressCtrl",["$scope","$state","$rootScope","$ionicPopover","user_shipping_addresses","$ionicLoading","$ionicPopup","CheckoutService","GetAssociatedStateList","PersonAddressDel","PersonAddressUpdate","PersonAddressAdd","SetDefaultPersonProfile",function(e,t,o,s,a,i,r,n,c,l,d,p,u){e.user_shipping_addresses=a,e.show_new_address_button=!0,e.data={},s.fromTemplateUrl("views/checkout/partials/address-chooser-popover.html",{scope:e}).then(function(t){e.addresses_popover=t}),e.cancel=function(){var e=_.last(o.previousView);e.fromState?t.go(e.fromState,e.fromParams):t.go("main.app.checkout")},c.get({countryGeoId:"CHN",listOrderBy:"geoId"},function(t){console.log(t),(t.resultData||t.resultData.stateList)&&(e.chnGeoList=t.resultData.stateList)}),n.getUserSelectedAddress().then(function(t){t.partyAndContactMech&&(console.log(t),e.data.selected_address=t.partyAndContactMech)}),e.openProvincePopover=function(t){e.province_popover.show(t)},e.selectProvince=function(t){c.get({countryGeoId:t.id,listOrderBy:"geoId"},function(t){console.log(t),(t.resultData||t.resultData.stateList)&&(e.cityGeoList=t.resultData.stateList,e.city_length=t.resultData.stateList.length)}),e.countyGeoList="",e.province_popover.hide()},e.openCityPopover=function(t){e.city_popover.show(t)},e.selectCity=function(t){c.get({countryGeoId:t.id,listOrderBy:"geoId"},function(t){console.log(t),(t.resultData||t.resultData.stateList)&&(e.countyGeoList=t.resultData.stateList,e.county_length=t.resultData.stateList.length)}),e.city_popover.hide()},e.openCountyPopover=function(t){e.county_popover.show(t)},e.selectCounty=function(t){e.county_popover.hide()},e.selectShippingAddress=function(t){u.set({defaultShipAddr:t.contactMechId},function(o){console.log("set default ship address success:",o),e.data.selected_address=t},function(e){console.log("set defalut ship address error",e)}),e.addresses_popover.hide()},e.saveSelectedAddress=function(t){e.cancel()},e.openAddressesPopover=function(t){console.log("opening addresses popover"),e.addresses_popover.show(t)},e.deleteShippingAddress=function(e){},e.addShippingAddress=function(e){},e.editShippingAddress=function(e){},e.showNewAddressPopup=function(){e.error="",e.address={},s.fromTemplateUrl("views/checkout/partials/city-chooser-popover.html",{scope:e}).then(function(t){e.city_popover=t}),s.fromTemplateUrl("views/checkout/partials/province-chooser-popover.html",{scope:e}).then(function(t){e.province_popover=t}),s.fromTemplateUrl("views/checkout/partials/county-chooser-popover.html",{scope:e}).then(function(t){e.county_popover=t});var t=r.show({cssClass:"popup-outer new-shipping-address-view",templateUrl:"views/checkout/partials/new-shipping-address-popup.html",title:"新地址",scope:e,buttons:[{text:"关闭"},{text:"新建",onTap:function(t){if(console.log(e.address),e.address&&e.address.paAttnName&&e.address.paAddress1&&e.address.paCountyGeoId&&e.address.paCity&&e.address.paMobilePhone&&e.address.paPostalCode&&e.address.paStateProvinceGeoId){var o={address1:e.address.paAddress1,attnName:e.address.paAttnName,city:e.address.paCity,countyGeoId:e.address.paCountyGeoId,mobilePhone:e.address.paMobilePhone,postalCode:e.address.paPostalCode,stateProvinceGeoId:e.address.paStateProvinceGeoId,contactMechId:""};p.save(o,function(t){return console.log("add address success:",t),e.user_shipping_addresses.push(e.address),"added"},function(e){return console.log("add address err:",e),e})}else e.error="请完善地址信息!",t.preventDefault()}}]});t.then(function(e){e&&console.log(e)})},e.showEditAddressPopup=function(t){s.fromTemplateUrl("views/checkout/partials/city-chooser-popover.html",{scope:e}).then(function(t){e.city_popover=t}),s.fromTemplateUrl("views/checkout/partials/province-chooser-popover.html",{scope:e}).then(function(t){e.province_popover=t}),s.fromTemplateUrl("views/checkout/partials/county-chooser-popover.html",{scope:e}).then(function(t){e.county_popover=t}),e.address=t,c.get({countryGeoId:t.paStateProvinceGeoId,listOrderBy:"geoId"},function(t){console.log(t),(t.resultData||t.resultData.stateList)&&(e.cityGeoList=t.resultData.stateList,e.province_length=t.resultData.stateList.length)}),c.get({countryGeoId:t.paCity,listOrderBy:"geoId"},function(t){console.log(t),(t.resultData||t.resultData.stateList)&&(e.countyGeoList=t.resultData.stateList,e.county_length=t.resultData.stateList.length)}),r.show({cssClass:"popup-outer edit-shipping-address-view",templateUrl:"views/checkout/partials/edit-shipping-address-popup.html",title:t.street,scope:e,buttons:[{text:"关闭",opTap:function(t){return console.log("close=",e.address),e.province_popover.remove(),e.city_popover.remove(),e.county_popover.remove(),"closed"}},{text:"删除",type:"delete-button",onTap:function(t){return console.log("delete=",e.address),e.province_popover.remove(),e.city_popover.remove(),e.county_popover.remove(),l.get({contactMechId:e.address.contactMechId},function(t){console.log("delete address success:",t),e.addresses_popover.remove(),angular.forEach(e.user_shipping_addresses,function(t,o){t.contactMechId===e.address.contactMechId&&e.user_shipping_addresses.splice(o,1)}),e.user_shipping_addresses&&(e.data.selected_address=e.user_shipping_addresses[0]),s.fromTemplateUrl("views/checkout/partials/address-chooser-popover.html",{scope:e}).then(function(t){e.addresses_popover=t}),e.data.selected_address=""},function(e){console.log("delete address success:",e)}),e.addresses_popover.remove(),"deleted"}},{text:"编辑",onTap:function(t){console.log("edit=",e.address),e.province_popover.remove(),e.city_popover.remove(),e.county_popover.remove();var o={address1:e.address.paAddress1,attnName:e.address.paAttnName,city:e.address.paCity,countyGeoId:e.address.paCountyGeoId,mobilePhone:e.address.paMobilePhone,postalCode:e.address.paPostalCode,stateProvinceGeoId:e.address.paStateProvinceGeoId,contactMechId:e.address.contactMechId};return console.log("editAddress",o),d.get(o,function(e){console.log("update address success:",e)},function(e){console.log("delete address err:",e)}),"updated"}}]}).then(function(e){console.log(e),e&&console.log(e)})}}]).controller("CheckoutCardCtrl",["$scope","$state","$rootScope","$ionicPopover","user_credit_cards","$ionicLoading","$ionicPopup","CheckoutService",function(e,t,o,s,a,i,r,n){s.fromTemplateUrl("views/checkout/partials/card-chooser-popover.html",{scope:e}).then(function(t){e.cards_popover=t}),e.cancel=function(){var e=_.last(o.previousView);t.go(e.fromState,e.fromParams)},e.user_credit_cards=a,e.data={},e.data.selected_card={},e.show_new_card_button=!0,e.selectCreditCard=function(t){e.cards_popover.hide()},e.saveSelectedCreditCard=function(t){n.saveUserSelectedCard(t),e.cancel()},e.openCardsPopover=function(t){console.log("opening cards popover"),e.cards_popover.show(t)},e.deleteCreditCard=function(e){},e.addCreditCard=function(e){},e.editCreditCard=function(e){},e.showNewCardPopup=function(){var t=r.show({cssClass:"popup-outer new-card-view",templateUrl:"views/checkout/partials/new-card-popup.html",title:"New Card",scope:e,buttons:[{text:"Close"},{text:"Add",onTap:function(e){}}]});t.then(function(e){e&&console.log("hacer algo cuando apreta ADD con los datos llenos")})},e.showEditCardPopup=function(t){e.card=t;var o=r.show({cssClass:"popup-outer edit-card-view",templateUrl:"views/checkout/partials/edit-card-popup.html",title:"**** "+t.number.slice(-4),scope:e,buttons:[{text:"Close"},{text:"Delete",type:"delete-button",onTap:function(e){}},{text:"Edit",onTap:function(e){}}]});o.then(function(e){e&&console.log("hacer algo cuando apreta ADD con los datos llenos")})}}]).controller("CheckoutPromoCodeCtrl",["$scope",function(e){}]),angular.module("gbcui_shopApp.checkout.directives",[]),angular.module("gbcui_shopApp.checkout.services",[]).service("CheckoutService",["$http","$q","PersonAddressDefault","PersonAddressQuery",function(e,t,o,s){this.getUserCreditCards=function(){var o=t.defer();return e.get("logged_user_db.json").success(function(e){o.resolve(e.user.credit_cards)}),o.promise},this.getUserShippingAddresses=function(){var e=t.defer();return s.get(function(t){t&&t.resultData&&e.resolve(t.resultData.contactMech)},function(e){console.log(e),t.reject(e)}),e.promise},this.getUserSelectedAddress=function(){var e=t.defer();return o.get(function(t){t&&t.resultData&&e.resolve(t.resultData)}),e.promise}}]),angular.module("gbcui_shopApp.common",["gbcui_shopApp.common.directives","gbcui_shopApp.common.controllers"]),angular.module("gbcui_shopApp.common.controllers",[]).controller("AppCtrl",["$scope","$ionicHistory",function(e,t){}]),angular.module("gbcui_shopApp.common.directives",[]).directive("multiBg",["_",function(e){return{scope:{multiBg:"=",interval:"=",helperClass:"@"},controller:["$scope","$element","$attrs",function(t,o,s){t.loaded=!1;var a=this;this.animateBg=function(){t.$apply(function(){t.loaded=!0,o.css({"background-image":"url("+t.bg_img+")"})})},this.setBackground=function(e){t.bg_img=e},e.isUndefined(t.multiBg)||(e.isArray(t.multiBg)&&t.multiBg.length>1&&!e.isUndefined(t.interval)&&e.isNumber(t.interval)?a.setBackground(t.multiBg[0]):a.setBackground(t.multiBg[0]))}],templateUrl:"views/common/templates/multi-bg.html",restrict:"A",replace:!0,transclude:!0}}]),angular.module("gbcui_shopApp.content",["gbcui_shopApp.content.directives","gbcui_shopApp.content.controllers"]),angular.module("gbcui_shopApp.content.controllers",[]).controller("FashionContentCtrl",["$scope","$state","$ionicPopup","$rootScope","product","ShoppingCartService","$ionicLoading","SERVER_URL","$ionicActionSheet","$timeout","VariantProductQuery","AddItemToShoppingCart","$q",function(e,t,o,s,a,i,r,n,c,l,d,p,u){e.serverUrl=n,e.goBack=function(){var e=_.last(s.previousView);t.go(e.fromState,e.fromParams)},console.log("product info:",a),e.product=a;var v={},m={};e.featureColor="颜色",e.featureSize="尺寸",e.colorList=[{colorId:"White",colorName:"白色"},{colorId:"Navy",colorName:"藏青色"},{colorId:"Coral",colorName:"珊瑚色"},{colorId:"Lime",colorName:"绿黄色"}],e.sizeList=[{sizeId:"XS",sizeName:"特小号"},{sizeId:"S",sizeName:"小号"},{sizeId:"M",sizeName:"中号"},{sizeId:"L",sizeName:"大号"},{sizeId:"XL",sizeName:"特大号"}],e.chosen_color="Navy",e.chosen_size="M",e.featureColorChange=function(t){e.chosen_color=t.colorId},e.openColorChooser=function(){v=o.show({cssClass:"popup-outer color-chooser-view",templateUrl:"views/content/fashion/color-chooser.html",scope:angular.extend(e,{data_chosen_color:e.chosen_color,colorList:e.colorList}),title:"颜色",buttons:[{text:"关闭",type:"close-popup",onTap:function(t){e.featureColor=_.find(e.colorList,function(t){return t.colorId==e.chosen_color}).colorName}}]})},e.featureSizeChange=function(t){e.chosen_size=t.sizeId},e.openSizeChooser=function(){m=o.show({cssClass:"popup-outer size-chooser-view",templateUrl:"views/content/fashion/size-chooser.html",scope:angular.extend(e,{chosen_size:e.chosen_size}),title:"尺寸",buttons:[{text:"关闭",type:"close-popup",onTap:function(t){e.featureSize=_.find(e.sizeList,function(t){return t.sizeId==e.chosen_size}).sizeName}}]})},"Y"===a.isVirtual&&a.variantTreeChoose?(e.variantTreeChoose=a.variantTreeChoose,e.choosen_features_names={},e.choosen_features_ids={},e.showSubmitBtn=0):e.showSubmitBtn=1,e.openFeatureChooser=function(t,s){console.log("feature name:",t),console.log("feature feature:",s),e.featureChange=function(o){console.log("featureChange:",o),e.chosen_feature=o.productFeatureId;var a=_.find(s,function(t){return console.log("e.chosen_feature:",e.chosen_feature),t.productFeatureId==e.chosen_feature});e.choosen_features_names[t]=a.description,e.choosen_features_ids[o.productFeatureTypeId]=a.productFeatureId,console.log("choosen_features_names:",e.choosen_features_names),console.log("choosen_features_ids:",e.choosen_features_ids);var i=Object.getOwnPropertyNames(e.variantTreeChoose).length,r=Object.getOwnPropertyNames(e.choosen_features_ids).length;r===i&&d.get({productId:e.product.productId,selectedFeatures:angular.toJson(e.choosen_features_ids)}).$promise.then(function(t){console.log(t),t.resultData&&t.resultData.variantProduct&&(e.cartItem.add_product_id=t.resultData.variantProduct.productId,e.product.priceResult.defaultPrice=t.resultData.variantProduct.price,e.showSubmitBtn=!0)},function(e){console.log(e)})},m=o.show({cssClass:"popup-outer size-chooser-view",templateUrl:"views/content/fashion/feature-chooser.html",scope:angular.extend(e,{chosen_feature:e.chosen_feature,features:s}),title:t,buttons:[{text:"关闭",type:"close-popup",onTap:function(e){}}]})},e.addToCart=function(o){o.product_id=e.product.productId,o.add_product_id||(o.add_product_id=e.product.productId),console.log("addToCart:",o),r.show({template:"加入购物车",duration:1e3}),p.get(o,function(e){e&&t.go("main.app.shopping-cart")},function(e){u.reject(e)})},e.cartItem={},e.cartItem.quantity=1,e.minusOne=function(t){angular.isNumber(t)&&t>1?e.cartItem.quantity=t-1:e.cartItem.quantity=1},e.plusOne=function(t){angular.isNumber(t)?e.cartItem.quantity=t+1:e.cartItem.quantity=1},e.scenes=[{label:"会话",value:0},{label:"朋友圈",value:1},{label:"收藏",value:2}];var h={};h.title=a.productName,h.description=a.description,h.thumb=n+a.smallImageUrl,h.media={},h.media.webpageUrl="www.yuaoq.com/alifind",e.socialShare=function(e){cordova.exec(function(e){console.log("分享成功")},function(e){console.log("分享失败"),console.debug(e)},"ShareSDK","share",[h.title,h.description,h.thumb,h.media.webpageUrl])},console.log("dddd")}]).controller("FoodContentCtrl",["$scope","$state","$rootScope","$ionicPopup","product","SERVER_URL",function(e,t,o,s,a,i){e.serverUrl=i,e.goBack=function(){var e=_.last(o.previousView);t.go(e.fromState,e.fromParams)},e.product=a,e.product.selected_schedule={name:"今日 上午8:00-下午12:00"},e.product.dishes=[{name:"新疆大盘鸡",rating:4},{name:"北京烤鸭",rating:2}],e.product.addresses=[{street:"0 Waubesa Junction",city:"Houston",state:"TX",postal_code:"77020",phone:"1-(713)471-0205",lat:43.07493,lng:-89.381388},{street:"50 Northfield Way",city:"Brooklyn",state:"NY",postal_code:"11210",phone:"1-(347)846-3569",lat:43.07493,lng:-88.381388}],e.product.selected_address=a.addresses[0],e.selectAddress=function(t){e.product.selected_address=t,n.close()};var r={},n={};e.openSchedules=function(){r=s.show({cssClass:"popup-outer food-schedules-view",templateUrl:"views/content/food/schedules.html",scope:angular.extend(e,{}),title:"更多",buttons:[{text:"关闭",type:"close-popup"}]})},e.openAddresses=function(){n=s.show({cssClass:"popup-outer food-addresses-view",templateUrl:"views/content/food/addresses.html",scope:angular.extend(e,{addresses:e.product.addresses,selected_address:e.product.selected_address}),title:"地址",buttons:[{text:"关闭",type:"close-popup"}]})},e.$on("mapInitialized",function(t,o){e.map=o})}]).controller("TravelContentCtrl",["$scope","$state","$rootScope","product",function(e,t,o,s){e.goBack=function(){var e=_.last(o.previousView);t.go(e.fromState,e.fromParams)},e.product=s}]).controller("DealsContentCtrl",["$scope","$state","$rootScope","product",function(e,t,o,s){e.goBack=function(){var e=_.last(o.previousView);t.go(e.fromState,e.fromParams)},e.product=s}]).controller("RealStateContentCtrl",["$scope","$state","$rootScope","product",function(e,t,o,s){e.goBack=function(){var e=_.last(o.previousView);t.go(e.fromState,e.fromParams)},e.product=s}]),angular.module("gbcui_shopApp.content.directives",[]).directive("progressBar",function(){return{restrict:"E",scope:{min:"@",max:"@",model:"=ngModel"},replace:!0,templateUrl:"views/content/food/progress-bar.template.html"}}),angular.module("gbcui_shopApp.content.services",[]).service("TestService",["$http","$q",function(e,t){this.testMethod=function(){}}]),angular.module("gbcui_shopApp.feed",["gbcui_shopApp.feed.directives","gbcui_shopApp.feed.filters","gbcui_shopApp.feed.services","gbcui_shopApp.feed.controllers"]),angular.module("gbcui_shopApp.feed.controllers",[]).controller("FeedCtrl",["$scope","$ionicScrollDelegate","ShoppingCartService","GetShoppingCartCount",function(e,t,o,s){o.getShoppingCartCount().then(function(t){e.shoppingCartCount=t})}]).controller("FashionCtrl",["$scope","$stateParams","products","SERVER_URL",function(e,t,o,s){e.filters=t.filters,e.products=o,e.serverUrl=s}]).controller("FoodCtrl",["$scope","products","SERVER_URL",function(e,t,o){e.products=t,e.serverUrl=o}]).controller("TravelCtrl",["$scope","products","SERVER_URL",function(e,t,o){console.log("TravelCtrl=========",t),e.products=t,e.serverUrl=o}]).controller("DealsCtrl",["$scope","products",function(e,t){e.products=t}]).controller("RealStateCtrl",["$scope","products","SERVER_URL",function(e,t,o){e.serverUrl=o,e.products=t}]),angular.module("gbcui_shopApp.feed.directives",[]).directive("slidingList",["$ionicScrollDelegate","$rootScope","$state",function(e,t,o){return{restrict:"E",transclude:!0,scope:{},controller:["$scope","$element","$attrs",function(t,s,a){var i=t.items=[],r=(t.active_class="",this),n=t.$on("$stateChangeSuccess",function(e,o,s,a,i){if(console.log("state changed",o),console.log("active_class",t.active_class),console.log("from ["+a.name+"] indexOf",a.name.indexOf("main.app.feed")),console.log("to ["+o.name+"] indexOf",o.name.indexOf("main.app.feed")),-1==a.name.indexOf("main.app.feed")&&o.name.indexOf("main.app.feed")>=0){console.log("**** Estoy navegando de otra tab hacia la tab de feed");var n=r.getSelectedItem(),c=r.getItem(o.name);console.log("selected_item",n),console.log("previous_item",c),n.state!=c.state?(t.$broadcast("item-selected",c),console.log("ANIMATING SCROLL")):console.log("DONT ANIMATE SCROLL")}});t.$on("$destroy",function(){console.log("destroing feed directives scope, should clean up"),n()}),this.selectItem=function(e){angular.forEach(i,function(e){e.selected=!1}),e.selected=!0,t.active_class=e.state,console.log("item selected",e.state)},t.$on("item-selected",function(t,o){r.selectItem(o);var a=s[0].querySelector(".scroll");console.log("scrolling, ITEM => ",o);var i=a.clientWidth,n=o.position.left-(i/2-o.position.width/2);e.$getByHandle("sliding-list-scroll").scrollTo(n,0,!0),console.log("fixing safari lazy repaint bug"),s[0].style.display="none",s[0].offsetHeight,s[0].style.display="block"}),this.addItem=function(e){0===i.length&&console.log("The state is: ",o.current.name),e.index=i.length||0,i.push(e),o.current.name==e.state&&(console.log("The item is the same as the state. ITEM => ",e),t.$broadcast("item-selected",e))},this.getItem=function(e){var t={};return angular.forEach(i,function(o){o.state==e&&(t=o)}),t},this.getSelectedItem=function(){var e={};return angular.forEach(i,function(t){t.selected&&(e=t)}),e}}],link:function(e,t,o,s){},templateUrl:"views/feed/templates/sliding-list.html"}}]).directive("centerEdges",function(){return{priority:100,scope:{},link:function(e,t,o){var s=t.children(),a=s.length,i=s[0],r=s[a-1],n=angular.element("<li/>"),c=angular.element("<li/>");n.css("width","calc(50vw - "+i.clientWidth/2+"px)"),c.css("width","calc(50vw - "+r.clientWidth/2+"px)"),t.prepend(n),t.append(c)},restrict:"A"}}).directive("slidingItem",["$ionicPosition","$timeout",function(e,t){return{restrict:"E",require:"^slidingList",transclude:!0,replace:!0,scope:{state:"@"},controller:["$scope","$element","$attrs",function(e,t,o){e.select=function(t){e.$emit("item-selected",t)}}],link:function(o,s,a,i){var r=s,n={};t(function(){n=e.position(r),o.position=n,i.addItem(o)},0)},templateUrl:"views/feed/templates/sliding-item.html"}}]),angular.module("gbcui_shopApp.feed.filters",[]).filter("cleanStateClass",function(){return function(e){return e.replace(/\./g,"-")}}).filter("floor",function(){return function(e){return Math.floor(e)}}),angular.module("gbcui_shopApp.feed.services",[]).service("FashionService",["$http","$q","ProductSearch","ProductSummary","ConfigProductConfig","ProductContent","GetAssociatedProducts","ProductBase",function(e,t,o,s,a,i,r,n){
this.getProducts=function(){var e=t.defer();return o.query({SEARCH_CATEGORY_ID:"10000"},function(t){t.resultData&&t.resultData.productIds&&0==t.resultData.productIds.length;var o=[];if(t.resultData){var i=t.resultData.productIds;i&&(angular.forEach(i,function(e,t){s.get({productId:e},function(s){var i=s.resultData;i.id=t,s.resultData&&"AGGREGATED"===s.resultData.productTypeId&&a.get({productId:e},function(e){console.log(e),i.totalPriceShow=!0,i.totalPrice=e.resultData.totalPrice}),console.log("productInfo:",i),o.push(i)},function(e){$q.reject(e.resultData)})}),e.resolve(o))}}),e.promise},this.getProduct=function(e){var o=t.defer();return s.get({productId:e},function(t){if(t.resultData){var s=t.resultData;i.get({productId:e,contentTypeId:"LONG_WAP_DESCRIPTION"},function(e){e.resultData&&e.resultData.productContents&&(console.log(e),s.wapDesc=e.resultData.productContents.LONG_WAP_DESCRIPTION)}),r.get({productId:e,type:"ALSO_BOUGHT"},function(e){if(e.resultData&&e.resultData.assocProducts){var t=e.resultData.assocProducts;s.assocProducts=t}o.resolve(s)})}}),o.promise}}]).service("FoodService",["$http","$q","ProductSearch","ProductSummary","ConfigProductConfig","ProductReview","ProductContent","GetAssociatedProducts",function(e,t,o,s,a,i,r,n){this.getProducts=function(){var e=t.defer();return o.query({SEARCH_CATEGORY_ID:"10001"}).$promise.then(function(o){o.resultData&&o.resultData.productIds&&0==o.resultData.productIds.length;var r=[];if(o.resultData){var n=o.resultData.productIds;n&&(angular.forEach(n,function(e){s.get({productId:e}).$promise.then(function(t){var o=t.resultData;t.resultData&&("AGGREGATED"===t.resultData.productTypeId&&a.get({productId:e}).$promise.then(function(e){console.log(e),o.totalPriceShow=!0,o.totalPrice=e.resultData.totalPrice}),i.get({productId:e}).$promise.then(function(e){console.log(e),e.resultData&&e.resultData.averageRating?o.averageRating=e.resultData.averageRating:o.averageRating=3})),r.push(o)},function(e){t.reject(e.resultData)})}),e.resolve(r))}}),e.promise},this.getProduct=function(e){var o=t.defer();return s.get({productId:e},function(t){if(t.resultData){var s=t.resultData;r.get({productId:e,contentTypeId:"LONG_WAP_DESCRIPTION"},function(e){e.resultData&&e.resultData.productContents&&(console.log(e),s.wapDesc=e.resultData.productContents.LONG_WAP_DESCRIPTION)}),n.get({productId:e,type:"ALSO_BOUGHT"},function(e){if(console.log("GetAssocProduct=========:",e),e.resultData&&e.resultData.assocProducts){var t=e.resultData.assocProducts;s.assocProducts=t}o.resolve(s)})}}),o.promise}}]).service("DealsService",["$http","$q",function(e,t){this.getProducts=function(){var o=t.defer();return e.get("deals_db.json").success(function(e){o.resolve(e.products)}),o.promise},this.getProduct=function(o){var s=t.defer();return e.get("deals_db.json").success(function(e){var t=_.find(e.products,function(e){return e.id==o});s.resolve(t)}),s.promise}}]).service("TravelService",["$http","$q","ProductSearch","ProductSummary","ConfigProductConfig","ProductReview","ProductCategoryByParentId",function(e,t,o,s,a,i,r){this.getProducts=function(){var e=t.defer();return r.get({categoryId:"10002"}).$promise.then(function(r){if(r.resultData&&r.resultData.categories){var n=[];angular.forEach(r.resultData.categories[0].child,function(e){o.query({SEARCH_CATEGORY_ID:e.productCategoryId}).$promise.then(function(o){if(o.resultData&&o.resultData.productIds&&0==o.resultData.productIds.length,o.resultData){var r=o.resultData.productIds;r&&angular.forEach(r,function(o){s.get({productId:o}).$promise.then(function(t){var s=t.resultData;s.categoryName=e.categoryName,t.resultData&&("AGGREGATED"===t.resultData.productTypeId&&a.get({productId:data1}).$promise.then(function(e){console.log(e),s.totalPriceShow=!0,s.totalPrice=e.resultData.totalPrice}),i.get({productId:o}).$promise.then(function(e){e.resultData?s.averageRating=e.resultData.averageRating:s.averageRating=3})),n.push(s)},function(e){t.reject(e.resultData)})})}})}),e.resolve(n)}}),e.promise},this.getProduct=function(o){var s=t.defer();return e.get("travel_db.json").success(function(e){var t=_.find(e.products,function(e){return e.id==o});s.resolve(t)}),s.promise}}]).service("RealStateService",["$http","$q","ProductSearch","ProductSummary","ConfigProductConfig","ProductReview","ProductCategoryByParentId",function(e,t,o,s,a,i,r){this.getProducts=function(){var e=t.defer();return r.get({categoryId:"10004"}).$promise.then(function(r){if(r.resultData&&r.resultData.categories){var n=[];angular.forEach(r.resultData.categories[0].child,function(e){var r={categoryName:e.categoryName},c=[];o.query({SEARCH_CATEGORY_ID:e.productCategoryId}).$promise.then(function(o){if(o.resultData&&o.resultData.productIds&&0==o.resultData.productIds.length,o.resultData){var r=o.resultData.productIds;r&&angular.forEach(r,function(o){s.get({productId:o}).$promise.then(function(t){var s=t.resultData;s.categoryName=e.categoryName,t.resultData&&("AGGREGATED"===t.resultData.productTypeId&&a.get({productId:data1}).$promise.then(function(e){console.log(e),s.totalPriceShow=!0,s.totalPrice=e.resultData.totalPrice}),i.get({productId:o}).$promise.then(function(e){e.resultData?s.averageRating=e.resultData.averageRating:s.averageRating=3})),c.push(s)},function(e){t.reject(e.resultData)})})}}),r.products=c,n.push(r)}),console.log(n),e.resolve(n)}}),e.promise},this.getProduct=function(o){var s=t.defer();return e.get("real_state_db.json").success(function(e){var t=_.find(e.products,function(e){return e.id==o});s.resolve(t)}),s.promise}}]),angular.module("gbcui_shopApp.filters",["gbcui_shopApp.filters.services","gbcui_shopApp.filters.directives","gbcui_shopApp.filters.controllers"]),angular.module("gbcui_shopApp.filters.services",[]).service("TestService",["$http","$q",function(e,t){this.testMethod=function(){}}]),angular.module("gbcui_shopApp.filters.directives",[]).directive("filterTabs",["$ionicSlideBoxDelegate",function(e){return{restrict:"A",scope:{slider:"@"},controller:["$scope",function(t){var o=t.tabs=[],s=this;this.select=function(s){angular.forEach(o,function(e){e.selected=!1}),s.selected=!0,e.$getByHandle(t.slider).slide(s.index-1)},this.addTab=function(e){0===o.length&&s.select(e),o.push(e)}}]}}]),angular.module("gbcui_shopApp.filters.controllers",[]).controller("FiltersCtrl",["$scope","$state","$rootScope","$ionicSlideBoxDelegate",function(e,t,o,s){e.category_filter="Fashion",e.tags_filter={},e.tags_filter.vegetables=!0,e.tags_filter.asian=!0,e.color_filter="#c284e5",e.size_filter="M",e.ingredients_filter={},e.ingredients_filter.butter=!0,e.ingredients_filter.lemon=!0,e.show_filter="Bars",e.budget_filter="$",e.distance_filter=30,e.bedrooms_filter=3,e.bathroom_filter=1,e.price_filter={from:144,to:523},e.price_filter_range={min:0,max:800},e.cancelRefine=function(){var e=_.last(o.previousView);t.go(e.fromState,e.fromParams)},e.applyRefine=function(){var e=_.last(o.previousView);t.go(e.fromState,e.fromParams)},e.lockSlide=function(){s.$getByHandle("filter-tabs-slider").enableSlide(!1)}}]).directive("filterTab",function(){return{restrict:"E",require:"^filterTabs",templateUrl:"views/filters/tab.template.html",transclude:!0,replace:!0,scope:{index:"@tab"},link:function(e,t,o,s){s.addTab(e),t.on("click",function(t){s.select(e)})}}}).directive("tagCheckbox",["$ionicConfig",function(e){return{restrict:"E",scope:{title:"@",model:"=ngModel"},replace:!0,transclude:!0,templateUrl:"views/filters/tag-checkbox.template.html",compile:function(t,o){var s=t[0].querySelector(".checkbox");s.classList.add("checkbox-"+e.form.checkbox())}}}]).directive("tagRadio",function(){return{restrict:"E",replace:!0,scope:{model:"=ngModel",value:"=ngValue",name:"@name"},transclude:!0,templateUrl:"views/filters/tag-radio.template.html",compile:function(e,t){return function(e,t,o){e.getValue=function(){return e.ngValue||o.value}}}}}).directive("colorRadio",function(){return{restrict:"E",replace:!0,scope:{model:"=ngModel",value:"=ngValue",name:"@name"},transclude:!0,templateUrl:"views/filters/color-radio.template.html",compile:function(e,t){return function(e,t,o){e.getValue=function(){return e.ngValue||o.value}}}}}).directive("numberInput",function(){return{restrict:"E",replace:!0,scope:{model:"=ngModel"},transclude:!0,templateUrl:"views/filters/number-input.template.html",controller:["$scope",function(e){e.minusOne=function(){e.model>1&&(e.model=e.model-1)},e.plusOne=function(){e.model=e.model+1}}]}}),angular.module("gbcui_shopApp.liked",["gbcui_shopApp.liked.directives","gbcui_shopApp.liked.services","gbcui_shopApp.liked.controllers"]),angular.module("gbcui_shopApp.liked.directives",[]).directive("testDirective",["$timeout",function(e){return{restrict:"A",scope:{},controller:["$scope",function(e){}],link:function(e,t,o,s){}}}]),angular.module("gbcui_shopApp.liked.services",[]).service("ListService",["$http","$q",function(e,t){this.getUserLists=function(){var o=t.defer();return e.get("logged_user_db.json").success(function(e){o.resolve(e.user.lists)}),o.promise},this.getList=function(o){var s=t.defer();return e.get("logged_user_db.json").success(function(e){var t=_.find(e.user.lists,function(e){return e.id==o});s.resolve(t)}),s.promise}}]),angular.module("gbcui_shopApp.liked.controllers",[]).controller("LikedCtrl",["$scope","lists",function(e,t){e.lists=t}]),angular.module("gbcui_shopApp.search",["gbcui_shopApp.search.directives","gbcui_shopApp.search.services","gbcui_shopApp.search.controllers","gbcui_shopApp.search.fashion.controllers","gbcui_shopApp.search.filters"]),angular.module("gbcui_shopApp.search.controllers",[]).controller("SearchCtrl",["$scope","FoodService","results","SERVER_URL",function(e,t,o,s){e.search={query:""},e.products=o,e.cancelSearch=function(){e.search={query:""}},e.serverUrl=s}]),angular.module("gbcui_shopApp.search.fashion.controllers",[]).controller("FashionSearchCtrl",["$scope","FoodService","results","SERVER_URL",function(e,t,o,s){e.search={query:""},e.products=o,e.cancelSearch=function(){e.search={query:""}},e.serverUrl=s}]),angular.module("gbcui_shopApp.search.directives",[]).directive("testDirective",["$timeout",function(e){return{restrict:"A",scope:{},controller:["$scope",function(e){}],link:function(e,t,o,s){}}}]),angular.module("gbcui_shopApp.search.filters",[]).filter("searchField",["$parse",function(e){function t(e){return angular.isArray(e)?e:Object.keys(e).map(function(t){return e[t]})}return function(o){var s,a;o=angular.isObject(o)?t(o):o;var i=Array.prototype.slice.call(arguments,1);return angular.isArray(o)&&i.length?o.map(function(t){return a=i.map(function(o){return(s=e(o))(t)}).join(" "),angular.extend(t,{searchField:a})}):o}}]),angular.module("gbcui_shopApp.search.services",[]).service("TestService",["$http","$q",function(e,t){this.testMethod=function(){}}]),angular.module("gbcui_shopApp.shopping-cart",["gbcui_shopApp.shopping-cart.directives","gbcui_shopApp.shopping-cart.services","gbcui_shopApp.shopping-cart.controllers"]),angular.module("gbcui_shopApp.shopping-cart.controllers",[]).controller("ShoppingCartCtrl",["$scope","$state","$rootScope","$ionicActionSheet","shoppingCart","ShoppingCartService","GetShoppingCart","SERVER_URL","ModifyCart",function(e,t,o,s,a,i,r,n,c){console.log("ShoppingCartCrtl get Shopping Cart",a),e.shoppingCart=a,e.serverUrl=n;e.minusOne=function(t,o){angular.isNumber(t.quantity)?t.quantity-=1:t.quantity=1;var s={removeSelected:!1};s["update_"+o]=t.quantity,c.get(s).$promise.then(function(t){r.get(function(t){e.shoppingCart=t.resultData},function(e){})},function(e){})},e.plusOne=function(t,o){angular.isNumber(t.quantity)?t.quantity+=1:t.quantity=1;var s={removeSelected:!1};s["update_"+o]=t.quantity,c.get(s).$promise.then(function(t){r.get(function(t){e.shoppingCart=t.resultData},function(e){})},function(e){})},e.close=function(){var e=_.last(o.previousView);console.log(e),t.go("main.app.feed.fashion")},e.removeFromCart=function(t){s.show({titleText:"删除商品",destructiveText:"从购物车删除",cancelText:"取消",cancel:function(){return!0},destructiveButtonClicked:function(){var o={removeSelected:!0,selectedItem:t};return c.get(o).$promise.then(function(t){r.get(function(t){e.shoppingCart=t.resultData},function(e){})},function(e){}),!0}})}}]),angular.module("gbcui_shopApp.shopping-cart.directives",[]).directive("testDirective",["$timeout",function(e){return{restrict:"A",scope:{},controller:["$scope",function(e){}],link:function(e,t,o,s){}}}]),angular.module("gbcui_shopApp.shopping-cart.services",[]).service("ShoppingCartService",["$http","$q","$rootScope","GetShoppingCart","GetShoppingCartCount",function(e,t,o,s,a){this.getShoppingCart=function(){var e=t.defer();return s.get(function(t){e.resolve(t.resultData)},function(e){t.reject(e)}),e.promise},this.updatedProducts=function(e){window.localStorage.gbcui_shopApp_cart=JSON.stringify(e),o.$broadcast("cart_updated",e)},this.addProduct=function(e){var t=_.isUndefined(window.localStorage.gbcui_shopApp_cart)?[]:JSON.parse(window.localStorage.gbcui_shopApp_cart),s=_.find(t,function(t){return t.id==e.id});s||(t.push(e),o.$broadcast("cart_updated",t),o.$emit("cart_updated",t)),window.localStorage.gbcui_shopApp_cart=JSON.stringify(t)},this.removeProduct=function(e){var t=JSON.parse(window.localStorage.gbcui_shopApp_cart),s=_.reject(t,function(t){return t.id==e.id});window.localStorage.gbcui_shopApp_cart=JSON.stringify(s),o.$broadcast("cart_updated",s)},this.getShoppingCartCount=function(){var e=t.defer();return a.get(function(t){console.log("GetShoppingCartCount:",t),e.resolve(t.resultData.cartCount)},function(e){t.reject(e),console.log("GetShoppingCartCount:",e)}),e.promise}}]),angular.module("gbcui_shopApp.sort",["gbcui_shopApp.sort.controllers","gbcui_shopApp.fashion.sort.controllers"]),angular.module("gbcui_shopApp.sort.controllers",[]).controller("SortCtrl",["$scope","$ionicPopup","$state","$filter",function(e,t,o,s){var a={},i=s("cleanStateClass")(o.current.name);e.sort_order="Price",e.openSort=function(){a=t.show({cssClass:"popup-outer sort-view "+i,templateUrl:"views/sort/sort.html",scope:angular.extend(e,{sort_order:e.sort_order}),title:"Sort by:",buttons:[{text:"Close",type:"close-popup"}]})}}]),angular.module("gbcui_shopApp.fashion.sort.controllers",[]).controller("FashionSortCtrl",["$scope","$ionicPopup","$state","$filter","ProductSearch",function(e,t,o,s,a){var i={},r=s("cleanStateClass")(o.current.name);e.sort_order="",e.openSort=function(){i=t.show({cssClass:"popup-outer sort-view "+r,templateUrl:"views/sort/fashionSort.html",scope:angular.extend(e,{sort_order:e.sort_order}),title:"排序:",buttons:[{text:"关闭",type:"close-popup",onTap:function(t){var o=this.scope.sort_order;return e.sort_order=o,a.query({SEARCH_CATEGORY_ID:"10000",sortOrder:o,sortAscending:"N"},function(t){console.log(t.resultData.productIds);var o=[];t.resultData&&t.resultData.productIds&&angular.forEach(t.resultData.productIds,function(t,s){angular.forEach(e.products,function(e){e.productId===t&&(e.id=s,o.push(e))})}),e.products=o})}}]})}}]),angular.module("gbcui_shopApp.walkthrough",["gbcui_shopApp.walkthrough.controllers","gbcui_shopApp.walkthrough.directives","gbcui_shopApp.walkthrough.services"]),angular.module("gbcui_shopApp.walkthrough.controllers",[]).controller("TestCtrl",["$scope",function(e){}]),angular.module("gbcui_shopApp.walkthrough.directives",[]).directive("testDirective",["$timeout",function(e){return{restrict:"A",scope:{},controller:["$scope",function(e){}],link:function(e,t,o,s){}}}]),angular.module("gbcui_shopApp.walkthrough.services",[]).service("TestService",["$http","$q",function(e,t){this.testMethod=function(){}}]),angular.module("gbcui_shopApp.getting-started",["gbcui_shopApp.getting-started.directives","gbcui_shopApp.getting-started.services","gbcui_shopApp.getting-started.controllers"]),angular.module("gbcui_shopApp.getting-started.controllers",[]).controller("GettingStartedCtrl",["$scope","$state","$ionicSlideBoxDelegate",function(e,t,o){e.skipIntro=function(){t.go("main.app.feed.fashion")},e.show_call_to_action_button=!1,e.show_skip_button=!1;var s=o.$getByHandle("getting-started-slides");e.pagerClicked=function(e){s.slide(e)},e.slideChanged=function(t){t+1===s.slidesCount()?(e.show_call_to_action_button=!0,s.update()):e.show_call_to_action_button=!1,t+1>1?e.show_skip_button=!0:e.show_skip_button=!1},e.browsing="Plus Size",e.pick_categories={},e.pick_categories.tops=!0,e.pick_categories.jackets=!0}]),angular.module("gbcui_shopApp.getting-started.directives",[]).directive("customCheckbox",["$ionicConfig",function(e){return{restrict:"E",scope:{title:"@",model:"=ngModel"},replace:!0,transclude:!0,templateUrl:"views/getting-started/custom-checkbox.template.html",compile:function(t,o){var s=t[0].querySelector(".checkbox");s.classList.add("checkbox-"+e.form.checkbox())}}}]),angular.module("gbcui_shopApp.getting-started.services",[]).service("TestService",["$http","$q",function(e,t){this.testMethod=function(){}}]).controller("ListDetailsCtrl",["$scope","$state","$rootScope","list",function(e,t,o,s){e.goBack=function(){var e=_.last(o.previousView);t.go(e.fromState,e.fromParams)},e.list=s}]).controller("NewListCtrl",["$scope","$state","$rootScope",function(e,t,o){e.cancel=function(){var e=_.last(o.previousView);t.go(e.fromState,e.fromParams)},e.create=function(){var e=_.last(o.previousView);t.go(e.fromState,e.fromParams)}}]),function(){function e(e,t,o){var a=document.createElement("form");a.setAttribute("method",t),a.setAttribute("action",e);for(var i in o)if(s.call(o,i)){var r=document.createElement("input");r.setAttribute("type","hidden"),r.setAttribute("name",i),r.setAttribute("value",o[i]),a.appendChild(r)}document.body.appendChild(a),a.submit()}function t(e,t,o){"undefined"==typeof o&&(o=!1);var s=[];for(var a in e)"bfb_wap"==t&&"url"==a||"yeepay_wap"==t&&"mode"==a||s.push(a+"="+(o?encodeURIComponent(e[a]):e[a]));return s.join("&")}var o="2.0.7",s={}.hasOwnProperty,a=function(){},i={PINGPP_NOTIFY_URL:"https://api.pingxx.com/notify/charges/",UPACP_WAP_URL:"https://gateway.95516.com/gateway/api/frontTransReq.do",ALIPAY_WAP_URL:"https://mapi.alipay.com/gateway.do",UPMP_WAP_URL:"uppay://uppayservice/?style=token&paydata=",JDPAY_WAP_URL:"https://m.jdpay.com/wepay/web/pay",YEEPAY_WAP_URL:"https://ok.yeepay.com/paymobile/api/pay/request",YEEPAY_WAP_TEST_URL:"http://mobiletest.yeepay.com/paymobile/api/pay/request",PINGPP_MOCK_URL:"http://sissi.pingxx.com/mock.php"},r={alipay_wap:"alipay_wap",upmp_wap:"upmp_wap",upacp_wap:"upacp_wap",bfb_wap:"bfb_wap",wx_pub:"wx_pub",yeepay_wap:"yeepay_wap",jdpay_wap:"jdpay_wap"};a.prototype={version:o,_resultCallback:void 0,_jsApiParameters:{},_debug:!1,_signature:void 0,createPayment:function(o,a,n,c){"function"==typeof a&&(this._resultCallback=a),"undefined"!=typeof n&&(this._signature=n),"boolean"==typeof c&&(this._debug=c);var l;if("string"==typeof o)try{l=JSON.parse(o)}catch(e){return void this._innerCallback("fail",this._error("json_decode_fail"))}else l=o;if("undefined"==typeof l)return void this._innerCallback("fail",this._error("json_decode_fail"));if(!s.call(l,"id"))return void this._innerCallback("fail",this._error("invalid_charge","no_charge_id"));if(!s.call(l,"channel"))return void this._innerCallback("fail",this._error("invalid_charge","no_channel"));var d=l.channel;if(!s.call(l,"credential"))return void this._innerCallback("fail",this._error("invalid_charge","no_credential"));if(!l.credential)return void this._innerCallback("fail",this._error("invalid_credential","credential_is_undefined"));if(!s.call(r,d))return void this._innerCallback("fail",this._error("invalid_charge","no_such_channel:"+d));if(!s.call(l.credential,d))return void this._innerCallback("fail",this._error("invalid_credential","no_valid_channel_credential"));if(!s.call(l,"livemode"))return void this._innerCallback("fail",this._error("invalid_charge","no_livemode"));if(0==l.livemode)return void this._testModeNotify(l);var p=l.credential[d];if(d==r.upmp_wap)location.href=i.UPMP_WAP_URL+p.paydata;else if(d==r.upacp_wap)e(i.UPACP_WAP_URL,"post",p);else if(d==r.alipay_wap)if(console.log("window.alipay:",window.alipay),p._input_charset="utf-8","undefined"!=typeof window.alipay){var u=t(p,d,!0);console.log("alipay pay parameters:",u);var v=this;window.alipay.h5Pay(u,function(e){v._innerCallback("success")},function(e){v._innerCallback("fail",this._error("alipay_result_fail",e))})}else e(i.ALIPAY_WAP_URL,"get",p);else if(d==r.bfb_wap){if(!s.call(p,"url"))return void this._innerCallback("fail",this._error("invalid_credential","missing_field:url"));location.href=p.url+"?"+t(p,d)}else if(d==r.yeepay_wap){for(var m=["merchantaccount","encryptkey","data"],h=0;h<m.length;h++)if(!s.call(p,m[h]))return void this._innerCallback("fail",this._error("invalid_credential","missing_field_"+m[h]));s.call(p,"mode")&&"test"==p.mode?location.href=i.YEEPAY_WAP_TEST_URL+"?"+t(p,d,!0):location.href=i.YEEPAY_WAP_URL+"?"+t(p,d,!0)}else if(d==r.wx_pub){for(var m=["appId","timeStamp","nonceStr","package","signType","paySign"],h=0;h<m.length;h++)if(!s.call(p,m[h]))return void this._innerCallback("fail",this._error("invalid_credential","missing_field_"+m[h]));this._jsApiParameters=p,this._callpay()}else d==r.jdpay_wap&&e(i.JDPAY_WAP_URL,"post",p)},_jsApiCall:function(){var e=this;e._jsApiParameters!={}&&WeixinJSBridge.invoke("getBrandWCPayRequest",e._jsApiParameters,function(t){"get_brand_wcpay_request:ok"==t.err_msg?e._innerCallback("success"):"get_brand_wcpay_request:cancel"==t.err_msg?e._innerCallback("cancel"):e._innerCallback("fail",e._error("wx_result_fail",t.err_msg))})},_callpay:function(){function e(){t._jsApiCall()}var t=this;if("undefined"!=typeof wx&&"undefined"!=typeof t._signature){var o=!1;wx.config({debug:t._debug,appId:t._jsApiParameters.appId,timestamp:t._jsApiParameters.timeStamp,nonceStr:t._jsApiParameters.nonceStr,signature:t._signature,jsApiList:["chooseWXPay"]}),wx.ready(function(){o||wx.chooseWXPay({timestamp:t._jsApiParameters.timeStamp,nonceStr:t._jsApiParameters.nonceStr,package:t._jsApiParameters.package,signType:t._jsApiParameters.signType,paySign:t._jsApiParameters.paySign,success:function(e){"chooseWXPay:ok"==e.errMsg?t._innerCallback("success"):t._innerCallback("fail",t._error("wx_result_fail",e.errMsg))},cancel:function(e){t._innerCallback("cancel")},fail:function(e){t._innerCallback("fail",t._error("wx_result_fail",e.errMsg))}})}),wx.error(function(e){o=!0,t._innerCallback("fail",t._error("wx_config_error",e.errMsg))})}else"undefined"==typeof WeixinJSBridge?document.addEventListener?document.addEventListener("WeixinJSBridgeReady",e,!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",e),document.attachEvent("onWeixinJSBridgeReady",e)):this._jsApiCall()},_error:function(e,t){return e="undefined"==typeof e?"":e,t="undefined"==typeof t?"":t,{msg:e,extra:t}},_innerCallback:function(e,t){"function"==typeof this._resultCallback&&("undefined"==typeof t&&(t=this._error()),this._resultCallback(e,t))},_testModeNotify:function(e){var o=this;if(e.channel==r.wx_pub){var a=confirm("模拟付款？");if(a){var n=new XMLHttpRequest;n.open("GET",i.PINGPP_NOTIFY_URL+e.id+"?livemode=false",!0),n.onload=function(){if(n.status>=200&&n.status<400&&"success"==n.responseText)o._innerCallback("success");else{var e="http_code:"+n.status+";response:"+n.responseText;o._innerCallback("fail",o._error("testmode_notify_fail",e))}},n.onerror=function(){o._innerCallback("fail",o._error("network_err"))},n.send()}else o._innerCallback("cancel")}else{var c={ch_id:e.id,scheme:"http",channel:e.channel};s.call(e,"order_no")?c.order_no=e.order_no:s.call(e,"orderNo")&&(c.order_no=e.orderNo),s.call(e,"time_expire")?c.time_expire=e.time_expire:s.call(e,"timeExpire")&&(c.time_expire=e.timeExpire),s.call(e,"extra")&&(c.extra=encodeURIComponent(JSON.stringify(e.extra))),location.href=i.PINGPP_MOCK_URL+"?"+t(c)}}},a.prototype.payment=a.prototype.createPayment,window.pingpp=new a,window.PINGPP_PAY_SDK=window.PINGPP_WX_PUB=window.pingpp}(),function(e,t){e.share=function(e,t,o){if("undefined"==typeof Wechat)return alert("Wechat plugin is not installed."),!1;var s={scene:e};if(s.message={title:"",description:"",mediaTagName:"",messageExt:"",messageAction:"<action>dotalist</action>",media:{}},angular.extend(s.message,o),"send-text"==t)console.log("share;",s);else switch(t){case"check-installed":return Wechat.isInstalled(function(e){alert("Wechat installed: "+(e?"Yes":"No"))}),!0;case"send-photo-local":s.message.media.type=Wechat.Type.IMAGE;break;case"send-photo-remote":s.message.media.type=Wechat.Type.IMAGE;break;case"send-link-thumb-local":s.message.media.type=Wechat.Type.LINK;break;case"send-link-thumb-remote":s.message.media.type=Wechat.Type.LINK;break;case"send-music":s.message.media.type=Wechat.Type.MUSIC;break;case"send-video":s.message.media.type=Wechat.Type.VIDEO;break;case"send-app":s.message.media.type=Wechat.Type.APP;break;case"send-nongif":s.message.media.type=Wechat.Type.EMOTION;break;case"send-gif":break;case"send-file":s.message.media.type=Wechat.Type.FILE;break;case"auth":return Wechat.auth("snsapi_userinfo",function(e){alert(JSON.stringify(e))},function(e){alert("Failed: "+e)}),!0;default:return alert(t+" can not be recognized!"),!1}return Wechat.share(s,function(){alert("Success")},function(e){alert("Failed: "+e)}),!0}}(window,document);